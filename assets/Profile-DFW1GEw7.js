const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D2ToFmkX.js","assets/formatIncompletePhoneNumber-CO6KxHP7.js","assets/index-Dd9s-Wl6.js","assets/react-DDCWQfk_.js","assets/react-dom-DZBigVa_.js","assets/index-DfxGwrTj.css","assets/index-D6r3sWpr.js","assets/index-DkU7GfEn.js"])))=>i.map(i=>d[i]);
import{c as U,r as i,a as Y,l as Z,j as e,d as ee,P as q,f as B,e as te,A as re,i as N,C as R,k as se,B as v,u as ae,q as C,p as M,E as ne,x as oe,_ as ie}from"./index-Dd9s-Wl6.js";import{E as F}from"./ElementTitleHeader-CTjdIz2E.js";import{M as ce,W as le}from"./WearableRefreshRate-DLoJLILn.js";import{p as L}from"./pt-BR.json-Bqz2tW3U.js";import{I}from"./input-Cxb16DK6.js";import{H as D}from"./HorizontalDivider-DanKrOhN.js";import{I as V,B as H,F as w}from"./Backdrop-De4BYmFo.js";import{$ as z}from"./module-j6hc5LO1.js";import de,{formatPhoneNumber as ue}from"./index-D2ToFmkX.js";import{S as O}from"./settings-0WOm_jhL.js";import"./react-DDCWQfk_.js";import"./react-dom-DZBigVa_.js";import"./index-DkU7GfEn.js";import"./alert-dialog-DusK-BE0.js";import"./formatIncompletePhoneNumber-CO6KxHP7.js";import"./index-D6r3sWpr.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=U("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=U("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);function fe(t){const r=i.useRef({value:t,previous:t});return i.useMemo(()=>(r.current.value!==t&&(r.current.previous=r.current.value,r.current.value=t),r.current.previous),[t])}var _="Checkbox",[pe,qe]=ee(_),[xe,ge]=pe(_),W=i.forwardRef((t,r)=>{const{__scopeCheckbox:s,name:o,checked:n,defaultChecked:a,required:u,disabled:d,value:m="on",onCheckedChange:p,form:f,...x}=t,[c,l]=i.useState(null),h=Y(r,g=>l(g)),P=i.useRef(!1),A=c?f||!!c.closest("form"):!0,[j=!1,S]=Z({prop:n,defaultProp:a,onChange:p}),Q=i.useRef(j);return i.useEffect(()=>{const g=c==null?void 0:c.form;if(g){const k=()=>S(Q.current);return g.addEventListener("reset",k),()=>g.removeEventListener("reset",k)}},[c,S]),e.jsxs(xe,{scope:s,state:j,disabled:d,children:[e.jsx(q.button,{type:"button",role:"checkbox","aria-checked":b(j)?"mixed":j,"aria-required":u,"data-state":X(j),"data-disabled":d?"":void 0,disabled:d,value:m,...x,ref:h,onKeyDown:B(t.onKeyDown,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:B(t.onClick,g=>{S(k=>b(k)?!0:!k),A&&(P.current=g.isPropagationStopped(),P.current||g.stopPropagation())})}),A&&e.jsx(Ce,{control:c,bubbles:!P.current,name:o,value:m,checked:j,required:u,disabled:d,form:f,style:{transform:"translateX(-100%)"},defaultChecked:b(a)?!1:a})]})});W.displayName=_;var $="CheckboxIndicator",K=i.forwardRef((t,r)=>{const{__scopeCheckbox:s,forceMount:o,...n}=t,a=ge($,s);return e.jsx(te,{present:o||b(a.state)||a.state===!0,children:e.jsx(q.span,{"data-state":X(a.state),"data-disabled":a.disabled?"":void 0,...n,ref:r,style:{pointerEvents:"none",...t.style}})})});K.displayName=$;var Ce=t=>{const{control:r,checked:s,bubbles:o=!0,defaultChecked:n,...a}=t,u=i.useRef(null),d=fe(s),m=re(r);i.useEffect(()=>{const f=u.current,x=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(x,"checked").set;if(d!==s&&l){const h=new Event("click",{bubbles:o});f.indeterminate=b(s),l.call(f,b(s)?!1:s),f.dispatchEvent(h)}},[d,s,o]);const p=i.useRef(b(s)?!1:s);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??p.current,...a,tabIndex:-1,ref:u,style:{...t.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(t){return t==="indeterminate"}function X(t){return b(t)?"indeterminate":t?"checked":"unchecked"}var G=W,be=K;const J=i.forwardRef(({className:t,...r},s)=>e.jsx(G,{ref:s,className:N("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-white data-[state=checked]:text-primary-foreground",t),...r,children:e.jsx(be,{className:N("flex items-center justify-center text-current"),children:e.jsx(R,{className:"h-4 w-4 text-primary",strokeWidth:4})})}));J.displayName=G.displayName;const E=({id:t,label:r,onChange:s,defaultChecked:o})=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{id:t,className:"h-5 w-5 bg-background border-border",onCheckedChange:n=>{if(n==="indeterminate"){s(!0);return}s(n)},defaultChecked:o}),e.jsx("label",{htmlFor:t,className:"leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:r})]}),y=({title:t,onChange:r,id:s,children:o})=>{const n=(a,u)=>{console.log("Alert type changed: ",a,u),r(a)};return e.jsxs(se,{title:t,titleBackground:!0,border:!0,children:[o,e.jsxs("div",{className:"p-4 grid gap-4 grid-cols-2",children:[e.jsx(E,{id:s+"-notification",label:"Notificação",onChange:a=>{n("notification",a)},defaultChecked:!0}),e.jsx(E,{id:s+"-whatsapp",label:"WhatsApp",onChange:a=>{n("whatsapp",a)}}),e.jsx(E,{id:s+"-sms",label:"SMS",onChange:a=>{n("sms",a)}}),e.jsx(E,{id:s+"-email",label:"Email",onChange:a=>{n("email",a)}})]})]})},je=()=>{const t=s=>`${s}%`,r=s=>{console.log("Refresh rate changed: ",s)};return e.jsx(ce,{marks:[{percentage:5,label:"5%"},{percentage:15,label:"15%"},{percentage:25,label:"25%"},{percentage:35,label:"35%"}],tipParser:t,min:5,max:35,step:1,onChangeComplete:r,showTrack:!0})},ke=({value:t,onConfirm:r,onCancel:s,onChange:o})=>{const{isEditing:n,setIsEditing:a}=i.useContext(V),[u,d]=i.useState(t??""),[m,p]=i.useState(!1),f=()=>{a(!0),d(t??"")},x=()=>{r?(p(!0),r(u).finally(()=>{a(!1),p(!1)})):a(!1)},c=()=>{a(!1),d(t??""),s&&s()},l=h=>{d(h??""),o&&o(h??"")};return e.jsxs(e.Fragment,{children:[n&&e.jsx(H,{onClose:c,open:n,confirm:t!==u}),e.jsxs("form",{className:N("text-lg flex items-center",n?"rounded-md gap-2 z-[20] w-full sm:max-w-xs":"gap-4"),onSubmit:h=>{h.preventDefault(),x()},children:[n?e.jsx(de,{placeholder:"(99) 99999-9999",value:t,onChange:l,defaultCountry:"BR",labels:L,inputComponent:I,className:"w-full text-black",autoComplete:"tel",disabled:m}):e.jsx(e.Fragment,{children:ue(t)}),n?e.jsx(v,{onClick:x,className:"[&_svg]:size-5 aspect-square",size:"icon",variant:"secondary",disabled:m,type:"submit",children:m?e.jsx(z,{strokeColor:"white"}):e.jsx(R,{})},"accept-button"):e.jsx(v,{onClick:f,className:"[&_svg]:size-5",size:"icon",variant:"secondary",type:"button",children:e.jsx(O,{})},"edit-button")]})]})},T=({value:t,onConfirm:r,onCancel:s,onChange:o})=>{const{isEditing:n,setIsEditing:a}=i.useContext(V),[u,d]=i.useState(t??""),[m,p]=i.useState(!1),f=()=>{a(!0),d(t??"")},x=()=>{r?(p(!0),r(u).finally(()=>{a(!1),p(!1)})):a(!1)},c=()=>{a(!1),d(t??""),s&&s()},l=h=>{d(h.target.value),o&&o(h.target.value)};return e.jsxs(e.Fragment,{children:[n&&e.jsx(H,{onClose:c,open:n,confirm:t!==u}),e.jsxs("form",{className:N("text-lg flex items-center",n?"rounded-md gap-2 z-[20] w-full sm:max-w-xs":"gap-4"),onSubmit:h=>{h.preventDefault(),x()},children:[n?e.jsx(I,{value:u,onChange:l,autoFocus:!0,className:"w-full"}):e.jsx(e.Fragment,{children:t}),n?e.jsx(v,{onClick:x,className:"[&_svg]:size-5 aspect-square",size:"icon",variant:"secondary",disabled:m,type:"submit",children:m?e.jsx(z,{strokeColor:"white"}):e.jsx(R,{})},"accept-button"):e.jsx(v,{onClick:f,className:"[&_svg]:size-5",size:"icon",variant:"secondary",type:"button",children:e.jsx(O,{})},"edit-button")]})]})},ye=()=>{const{session:t,user:r,setUser:s,loading:o}=ae(),[n,a]=i.useState(!1),u=i.useMemo(()=>o?"Carregando...":r?r.name:"",[r]),d=i.useMemo(()=>o?"Carregando...":t?t.user.email:"",[r]),m=i.useMemo(()=>o?"Carregando...":r?r.phone??"Não informado":"",[r]),p=async c=>{if(!r){C.error("Usuário não encontrado.");return}try{const l=await M(r.id,{name:c});if(l.error)throw l.error;if(l.data.length===0)throw new Error("User not found");s({...r,name:l.data[0].name}),C.success("Nome atualizado com sucesso.")}catch(l){console.error("Error updating user name: ",l),C.error("Erro ao atualizar nome. Tente novamente.")}},f=async c=>{if(!r){C.error("Usuário não encontrado.");return}try{const l=await M(r.id,{phone:c});if(l.error)throw l.error;if(l.data.length===0)throw new Error("User not found");s({...r,phone:l.data[0].phone}),C.success("Telefone atualizado com sucesso.")}catch(l){console.error("Error updating user phone: ",l),C.error("Erro ao atualizar telefone. Tente novamente.")}},x=async()=>{if(!d){C.error("Email não encontrado.");return}a(!0);try{const{error:c}=await ne(d);if(c)throw c;C.success("Email de troca de senha enviado com sucesso.")}catch(c){console.error("Error sending password reset email: ",c),C.error("Erro ao enviar email de recuperação de senha.")}a(!1)};return e.jsxs("div",{className:"space-y-2 md:mx-0",children:[e.jsx(w,{title:"Nome",children:e.jsx(T,{value:u,onConfirm:p})}),e.jsx(w,{title:"Email",children:e.jsx(T,{value:d,onConfirm:async c=>{alert("Salvando email"+c)}})}),e.jsx(w,{title:"Telefone",children:e.jsx(ke,{value:m,onConfirm:f})}),e.jsx(w,{title:"Senha",children:e.jsx(v,{variant:"secondary",size:"sm",onClick:x,disabled:n,children:n?e.jsxs(e.Fragment,{children:["Enviando ",e.jsx(z,{strokeColor:"white"})]}):e.jsxs(e.Fragment,{children:["Alterar senha",e.jsx(he,{})]})})})]})},ve=oe.lazy(()=>ie(()=>import("./index-D2ToFmkX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),Le=()=>{const[t,r]=i.useState(),[s]=i.useState(!1),o=n=>{console.log("Alert type changed: ",n)};return e.jsxs("div",{className:"text-white space-y-4 px-0 sm:px-2",children:[e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("h1",{className:"text-4xl font-semibold w-fit mx-auto",children:"Meu Perfil"}),e.jsx(me,{className:"h-40 w-40 mx-auto",strokeWidth:.7})]}),e.jsx(ye,{}),e.jsx(D,{className:"sm:-mx-2 mt-8"}),e.jsx(F,{title:"Configuração de alertas",description:"Defina o tipo de alerta que será enviado quando um evento for detectado pela pulseira."}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx(y,{title:"Taxa de atualização",id:"fall-detection",onChange:o,children:e.jsx("div",{className:"py-4 px-6",children:e.jsx(le,{})})}),e.jsx(y,{id:"battery-50",title:"50% de bateria",onChange:o}),e.jsx(y,{title:"Bateria baixa",id:"low-battery",onChange:o,children:e.jsx("div",{className:"py-4 px-6",children:e.jsx(je,{})})}),e.jsx(y,{title:"Detecção de quedas",id:"fall-detection",onChange:o}),e.jsx(y,{id:"out-of-area",title:"Saiu da área de segurança",onChange:o})]}),e.jsx(D,{className:"sm:-mx-2 mt-8"}),e.jsx(F,{title:"Contato de Emergência",description:"Adicione um número de telefone para realizar uma discagem rápida."}),e.jsx("div",{children:e.jsx(i.Suspense,{fallback:e.jsx("div",{children:"Carregando..."}),children:e.jsx(ve,{placeholder:"(99) 99999-9999",value:t,onChange:n=>r(n),defaultCountry:"BR",labels:L,inputComponent:I,className:"col-span-3 placeholder-red-200 text-black",autoComplete:"tel",disabled:s})})})]})};export{Le as default};
