import{c as de,r as o,E as Ae,F as Ct,p as Pe,j as e,G as Nt,q as It,H as be,I as Tt,o as W,J as Y,l as V,K as bt,M as Me,t as R,V as Et,O as Pt,Q as jt,S as Rt,T as _t,U as At,W as Mt,X as kt,Y as Dt,Z as Ot,$ as Lt,m as q,C as Bt,a as Vt,B as Se,f as ne,g as Ht}from"./index-CX7136yS.js";import{B as Ft,F as je}from"./Backdrop-WOqQ-gtS.js";import{F as Ut}from"./FieldContainerInput-B8kVOc1w.js";import{c as Re}from"./index-BdQq_4o_.js";import{u as Wt}from"./index-BYXgGKDX.js";import{C as ke}from"./chevron-down-DF9jD1R2.js";import{C as _e}from"./circle-help-DHmJT_No.js";import"./react-C1_t6syo.js";import"./react-dom-DdM9RXEZ.js";import"./alert-dialog-Db_hukuG.js";import"./input-C3S2_bkE.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=de("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=de("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=de("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=de("ScanSearch",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m16 16-1.9-1.9",key:"1dq9hf"}]]);var qt=[" ","Enter","ArrowUp","ArrowDown"],Gt=[" ","Enter"],ee="Select",[ue,pe,Yt]=Tt(ee),[re,Ho]=It(ee,[Yt,Ae]),fe=Ae(),[Xt,X]=re(ee),[Zt,Jt]=re(ee),Oe=n=>{const{__scopeSelect:r,children:t,open:c,defaultOpen:a,onOpenChange:d,value:s,defaultValue:i,onValueChange:l,dir:p,name:x,autoComplete:S,disabled:E,required:v,form:y}=n,u=fe(r),[w,C]=o.useState(null),[f,h]=o.useState(null),[O,L]=o.useState(!1),z=Ct(p),[m,N]=Pe({prop:c,defaultProp:a??!1,onChange:d,caller:ee}),[I,H]=Pe({prop:s,defaultProp:i,onChange:l,caller:ee}),M=o.useRef(null),_=w?y||!!w.closest("form"):!0,[k,A]=o.useState(new Set),K=Array.from(k).map(D=>D.props.value).join(";");return e.jsx(Nt,{...u,children:e.jsxs(Xt,{required:v,scope:r,trigger:w,onTriggerChange:C,valueNode:f,onValueNodeChange:h,valueNodeHasChildren:O,onValueNodeHasChildrenChange:L,contentId:be(),value:I,onValueChange:H,open:m,onOpenChange:N,dir:z,triggerPointerDownPosRef:M,disabled:E,children:[e.jsx(ue.Provider,{scope:r,children:e.jsx(Zt,{scope:n.__scopeSelect,onNativeOptionAdd:o.useCallback(D=>{A(U=>new Set(U).add(D))},[]),onNativeOptionRemove:o.useCallback(D=>{A(U=>{const $=new Set(U);return $.delete(D),$})},[]),children:t})}),_?e.jsxs(at,{"aria-hidden":!0,required:v,tabIndex:-1,name:x,autoComplete:S,value:I,onChange:D=>H(D.target.value),disabled:E,form:y,children:[I===void 0?e.jsx("option",{value:""}):null,Array.from(k)]},K):null]})})};Oe.displayName=ee;var Le="SelectTrigger",Be=o.forwardRef((n,r)=>{const{__scopeSelect:t,disabled:c=!1,...a}=n,d=fe(t),s=X(Le,t),i=s.disabled||c,l=W(r,s.onTriggerChange),p=pe(t),x=o.useRef("touch"),[S,E,v]=lt(u=>{const w=p().filter(h=>!h.disabled),C=w.find(h=>h.value===s.value),f=it(w,u,C);f!==void 0&&s.onValueChange(f.value)}),y=u=>{i||(s.onOpenChange(!0),v()),u&&(s.triggerPointerDownPosRef.current={x:Math.round(u.pageX),y:Math.round(u.pageY)})};return e.jsx(Pt,{asChild:!0,...d,children:e.jsx(V.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":ct(s.value)?"":void 0,...a,ref:l,onClick:R(a.onClick,u=>{u.currentTarget.focus(),x.current!=="mouse"&&y(u)}),onPointerDown:R(a.onPointerDown,u=>{x.current=u.pointerType;const w=u.target;w.hasPointerCapture(u.pointerId)&&w.releasePointerCapture(u.pointerId),u.button===0&&u.ctrlKey===!1&&u.pointerType==="mouse"&&(y(u),u.preventDefault())}),onKeyDown:R(a.onKeyDown,u=>{const w=S.current!=="";!(u.ctrlKey||u.altKey||u.metaKey)&&u.key.length===1&&E(u.key),!(w&&u.key===" ")&&qt.includes(u.key)&&(y(),u.preventDefault())})})})});Be.displayName=Le;var Ve="SelectValue",He=o.forwardRef((n,r)=>{const{__scopeSelect:t,className:c,style:a,children:d,placeholder:s="",...i}=n,l=X(Ve,t),{onValueNodeHasChildrenChange:p}=l,x=d!==void 0,S=W(r,l.onValueNodeChange);return Y(()=>{p(x)},[p,x]),e.jsx(V.span,{...i,ref:S,style:{pointerEvents:"none"},children:ct(l.value)?e.jsx(e.Fragment,{children:s}):d})});He.displayName=Ve;var Qt="SelectIcon",Fe=o.forwardRef((n,r)=>{const{__scopeSelect:t,children:c,...a}=n;return e.jsx(V.span,{"aria-hidden":!0,...a,ref:r,children:c||"▼"})});Fe.displayName=Qt;var eo="SelectPortal",Ue=n=>e.jsx(bt,{asChild:!0,...n});Ue.displayName=eo;var te="SelectContent",We=o.forwardRef((n,r)=>{const t=X(te,n.__scopeSelect),[c,a]=o.useState();if(Y(()=>{a(new DocumentFragment)},[]),!t.open){const d=c;return d?Me.createPortal(e.jsx(ze,{scope:n.__scopeSelect,children:e.jsx(ue.Slot,{scope:n.__scopeSelect,children:e.jsx("div",{children:n.children})})}),d):null}return e.jsx(Ke,{...n,ref:r})});We.displayName=te;var F=10,[ze,Z]=re(te),to="SelectContentImpl",oo=At("SelectContent.RemoveScroll"),Ke=o.forwardRef((n,r)=>{const{__scopeSelect:t,position:c="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:d,onPointerDownOutside:s,side:i,sideOffset:l,align:p,alignOffset:x,arrowPadding:S,collisionBoundary:E,collisionPadding:v,sticky:y,hideWhenDetached:u,avoidCollisions:w,...C}=n,f=X(te,t),[h,O]=o.useState(null),[L,z]=o.useState(null),m=W(r,g=>O(g)),[N,I]=o.useState(null),[H,M]=o.useState(null),_=pe(t),[k,A]=o.useState(!1),K=o.useRef(!1);o.useEffect(()=>{if(h)return jt(h)},[h]),Rt();const D=o.useCallback(g=>{const[j,...B]=_().map(b=>b.ref.current),[P]=B.slice(-1),T=document.activeElement;for(const b of g)if(b===T||(b==null||b.scrollIntoView({block:"nearest"}),b===j&&L&&(L.scrollTop=0),b===P&&L&&(L.scrollTop=L.scrollHeight),b==null||b.focus(),document.activeElement!==T))return},[_,L]),U=o.useCallback(()=>D([N,h]),[D,N,h]);o.useEffect(()=>{k&&U()},[k,U]);const{onOpenChange:$,triggerPointerDownPosRef:G}=f;o.useEffect(()=>{if(h){let g={x:0,y:0};const j=P=>{var T,b;g={x:Math.abs(Math.round(P.pageX)-(((T=G.current)==null?void 0:T.x)??0)),y:Math.abs(Math.round(P.pageY)-(((b=G.current)==null?void 0:b.y)??0))}},B=P=>{g.x<=10&&g.y<=10?P.preventDefault():h.contains(P.target)||$(!1),document.removeEventListener("pointermove",j),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",j),document.addEventListener("pointerup",B,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",j),document.removeEventListener("pointerup",B,{capture:!0})}}},[h,$,G]),o.useEffect(()=>{const g=()=>$(!1);return window.addEventListener("blur",g),window.addEventListener("resize",g),()=>{window.removeEventListener("blur",g),window.removeEventListener("resize",g)}},[$]);const[me,ce]=lt(g=>{const j=_().filter(T=>!T.disabled),B=j.find(T=>T.ref.current===document.activeElement),P=it(j,g,B);P&&setTimeout(()=>P.ref.current.focus())}),he=o.useCallback((g,j,B)=>{const P=!K.current&&!B;(f.value!==void 0&&f.value===j||P)&&(I(g),P&&(K.current=!0))},[f.value]),ge=o.useCallback(()=>h==null?void 0:h.focus(),[h]),oe=o.useCallback((g,j,B)=>{const P=!K.current&&!B;(f.value!==void 0&&f.value===j||P)&&M(g)},[f.value]),le=c==="popper"?ye:$e,se=le===ye?{side:i,sideOffset:l,align:p,alignOffset:x,arrowPadding:S,collisionBoundary:E,collisionPadding:v,sticky:y,hideWhenDetached:u,avoidCollisions:w}:{};return e.jsx(ze,{scope:t,content:h,viewport:L,onViewportChange:z,itemRefCallback:he,selectedItem:N,onItemLeave:ge,itemTextRefCallback:oe,focusSelectedItem:U,selectedItemText:H,position:c,isPositioned:k,searchRef:me,children:e.jsx(_t,{as:oo,allowPinchZoom:!0,children:e.jsx(Mt,{asChild:!0,trapped:f.open,onMountAutoFocus:g=>{g.preventDefault()},onUnmountAutoFocus:R(a,g=>{var j;(j=f.trigger)==null||j.focus({preventScroll:!0}),g.preventDefault()}),children:e.jsx(kt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:s,onFocusOutside:g=>g.preventDefault(),onDismiss:()=>f.onOpenChange(!1),children:e.jsx(le,{role:"listbox",id:f.contentId,"data-state":f.open?"open":"closed",dir:f.dir,onContextMenu:g=>g.preventDefault(),...C,...se,onPlaced:()=>A(!0),ref:m,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:R(C.onKeyDown,g=>{const j=g.ctrlKey||g.altKey||g.metaKey;if(g.key==="Tab"&&g.preventDefault(),!j&&g.key.length===1&&ce(g.key),["ArrowUp","ArrowDown","Home","End"].includes(g.key)){let P=_().filter(T=>!T.disabled).map(T=>T.ref.current);if(["ArrowUp","End"].includes(g.key)&&(P=P.slice().reverse()),["ArrowUp","ArrowDown"].includes(g.key)){const T=g.target,b=P.indexOf(T);P=P.slice(b+1)}setTimeout(()=>D(P)),g.preventDefault()}})})})})})})});Ke.displayName=to;var no="SelectItemAlignedPosition",$e=o.forwardRef((n,r)=>{const{__scopeSelect:t,onPlaced:c,...a}=n,d=X(te,t),s=Z(te,t),[i,l]=o.useState(null),[p,x]=o.useState(null),S=W(r,m=>x(m)),E=pe(t),v=o.useRef(!1),y=o.useRef(!0),{viewport:u,selectedItem:w,selectedItemText:C,focusSelectedItem:f}=s,h=o.useCallback(()=>{if(d.trigger&&d.valueNode&&i&&p&&u&&w&&C){const m=d.trigger.getBoundingClientRect(),N=p.getBoundingClientRect(),I=d.valueNode.getBoundingClientRect(),H=C.getBoundingClientRect();if(d.dir!=="rtl"){const T=H.left-N.left,b=I.left-T,J=m.left-b,Q=m.width+J,ve=Math.max(Q,N.width),xe=window.innerWidth-F,we=Re(b,[F,Math.max(F,xe-ve)]);i.style.minWidth=Q+"px",i.style.left=we+"px"}else{const T=N.right-H.right,b=window.innerWidth-I.right-T,J=window.innerWidth-m.right-b,Q=m.width+J,ve=Math.max(Q,N.width),xe=window.innerWidth-F,we=Re(b,[F,Math.max(F,xe-ve)]);i.style.minWidth=Q+"px",i.style.right=we+"px"}const M=E(),_=window.innerHeight-F*2,k=u.scrollHeight,A=window.getComputedStyle(p),K=parseInt(A.borderTopWidth,10),D=parseInt(A.paddingTop,10),U=parseInt(A.borderBottomWidth,10),$=parseInt(A.paddingBottom,10),G=K+D+k+$+U,me=Math.min(w.offsetHeight*5,G),ce=window.getComputedStyle(u),he=parseInt(ce.paddingTop,10),ge=parseInt(ce.paddingBottom,10),oe=m.top+m.height/2-F,le=_-oe,se=w.offsetHeight/2,g=w.offsetTop+se,j=K+D+g,B=G-j;if(j<=oe){const T=M.length>0&&w===M[M.length-1].ref.current;i.style.bottom="0px";const b=p.clientHeight-u.offsetTop-u.offsetHeight,J=Math.max(le,se+(T?ge:0)+b+U),Q=j+J;i.style.height=Q+"px"}else{const T=M.length>0&&w===M[0].ref.current;i.style.top="0px";const J=Math.max(oe,K+u.offsetTop+(T?he:0)+se)+B;i.style.height=J+"px",u.scrollTop=j-oe+u.offsetTop}i.style.margin=`${F}px 0`,i.style.minHeight=me+"px",i.style.maxHeight=_+"px",c==null||c(),requestAnimationFrame(()=>v.current=!0)}},[E,d.trigger,d.valueNode,i,p,u,w,C,d.dir,c]);Y(()=>h(),[h]);const[O,L]=o.useState();Y(()=>{p&&L(window.getComputedStyle(p).zIndex)},[p]);const z=o.useCallback(m=>{m&&y.current===!0&&(h(),f==null||f(),y.current=!1)},[h,f]);return e.jsx(so,{scope:t,contentWrapper:i,shouldExpandOnScrollRef:v,onScrollButtonChange:z,children:e.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:e.jsx(V.div,{...a,ref:S,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});$e.displayName=no;var ro="SelectPopperPosition",ye=o.forwardRef((n,r)=>{const{__scopeSelect:t,align:c="start",collisionPadding:a=F,...d}=n,s=fe(t);return e.jsx(Ot,{...s,...d,ref:r,align:c,collisionPadding:a,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ye.displayName=ro;var[so,Ee]=re(te,{}),Ce="SelectViewport",qe=o.forwardRef((n,r)=>{const{__scopeSelect:t,nonce:c,...a}=n,d=Z(Ce,t),s=Ee(Ce,t),i=W(r,d.onViewportChange),l=o.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:c}),e.jsx(ue.Slot,{scope:t,children:e.jsx(V.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:R(a.onScroll,p=>{const x=p.currentTarget,{contentWrapper:S,shouldExpandOnScrollRef:E}=s;if(E!=null&&E.current&&S){const v=Math.abs(l.current-x.scrollTop);if(v>0){const y=window.innerHeight-F*2,u=parseFloat(S.style.minHeight),w=parseFloat(S.style.height),C=Math.max(u,w);if(C<y){const f=C+v,h=Math.min(y,f),O=f-h;S.style.height=h+"px",S.style.bottom==="0px"&&(x.scrollTop=O>0?O:0,S.style.justifyContent="flex-end")}}}l.current=x.scrollTop})})})]})});qe.displayName=Ce;var Ge="SelectGroup",[ao,co]=re(Ge),lo=o.forwardRef((n,r)=>{const{__scopeSelect:t,...c}=n,a=be();return e.jsx(ao,{scope:t,id:a,children:e.jsx(V.div,{role:"group","aria-labelledby":a,...c,ref:r})})});lo.displayName=Ge;var Ye="SelectLabel",Xe=o.forwardRef((n,r)=>{const{__scopeSelect:t,...c}=n,a=co(Ye,t);return e.jsx(V.div,{id:a.id,...c,ref:r})});Xe.displayName=Ye;var ie="SelectItem",[io,Ze]=re(ie),Je=o.forwardRef((n,r)=>{const{__scopeSelect:t,value:c,disabled:a=!1,textValue:d,...s}=n,i=X(ie,t),l=Z(ie,t),p=i.value===c,[x,S]=o.useState(d??""),[E,v]=o.useState(!1),y=W(r,f=>{var h;return(h=l.itemRefCallback)==null?void 0:h.call(l,f,c,a)}),u=be(),w=o.useRef("touch"),C=()=>{a||(i.onValueChange(c),i.onOpenChange(!1))};if(c==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(io,{scope:t,value:c,disabled:a,textId:u,isSelected:p,onItemTextChange:o.useCallback(f=>{S(h=>h||((f==null?void 0:f.textContent)??"").trim())},[]),children:e.jsx(ue.ItemSlot,{scope:t,value:c,disabled:a,textValue:x,children:e.jsx(V.div,{role:"option","aria-labelledby":u,"data-highlighted":E?"":void 0,"aria-selected":p&&E,"data-state":p?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...s,ref:y,onFocus:R(s.onFocus,()=>v(!0)),onBlur:R(s.onBlur,()=>v(!1)),onClick:R(s.onClick,()=>{w.current!=="mouse"&&C()}),onPointerUp:R(s.onPointerUp,()=>{w.current==="mouse"&&C()}),onPointerDown:R(s.onPointerDown,f=>{w.current=f.pointerType}),onPointerMove:R(s.onPointerMove,f=>{var h;w.current=f.pointerType,a?(h=l.onItemLeave)==null||h.call(l):w.current==="mouse"&&f.currentTarget.focus({preventScroll:!0})}),onPointerLeave:R(s.onPointerLeave,f=>{var h;f.currentTarget===document.activeElement&&((h=l.onItemLeave)==null||h.call(l))}),onKeyDown:R(s.onKeyDown,f=>{var O;((O=l.searchRef)==null?void 0:O.current)!==""&&f.key===" "||(Gt.includes(f.key)&&C(),f.key===" "&&f.preventDefault())})})})})});Je.displayName=ie;var ae="SelectItemText",Qe=o.forwardRef((n,r)=>{const{__scopeSelect:t,className:c,style:a,...d}=n,s=X(ae,t),i=Z(ae,t),l=Ze(ae,t),p=Jt(ae,t),[x,S]=o.useState(null),E=W(r,C=>S(C),l.onItemTextChange,C=>{var f;return(f=i.itemTextRefCallback)==null?void 0:f.call(i,C,l.value,l.disabled)}),v=x==null?void 0:x.textContent,y=o.useMemo(()=>e.jsx("option",{value:l.value,disabled:l.disabled,children:v},l.value),[l.disabled,l.value,v]),{onNativeOptionAdd:u,onNativeOptionRemove:w}=p;return Y(()=>(u(y),()=>w(y)),[u,w,y]),e.jsxs(e.Fragment,{children:[e.jsx(V.span,{id:l.textId,...d,ref:E}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Me.createPortal(d.children,s.valueNode):null]})});Qe.displayName=ae;var et="SelectItemIndicator",tt=o.forwardRef((n,r)=>{const{__scopeSelect:t,...c}=n;return Ze(et,t).isSelected?e.jsx(V.span,{"aria-hidden":!0,...c,ref:r}):null});tt.displayName=et;var Ne="SelectScrollUpButton",ot=o.forwardRef((n,r)=>{const t=Z(Ne,n.__scopeSelect),c=Ee(Ne,n.__scopeSelect),[a,d]=o.useState(!1),s=W(r,c.onScrollButtonChange);return Y(()=>{if(t.viewport&&t.isPositioned){let i=function(){const p=l.scrollTop>0;d(p)};const l=t.viewport;return i(),l.addEventListener("scroll",i),()=>l.removeEventListener("scroll",i)}},[t.viewport,t.isPositioned]),a?e.jsx(rt,{...n,ref:s,onAutoScroll:()=>{const{viewport:i,selectedItem:l}=t;i&&l&&(i.scrollTop=i.scrollTop-l.offsetHeight)}}):null});ot.displayName=Ne;var Ie="SelectScrollDownButton",nt=o.forwardRef((n,r)=>{const t=Z(Ie,n.__scopeSelect),c=Ee(Ie,n.__scopeSelect),[a,d]=o.useState(!1),s=W(r,c.onScrollButtonChange);return Y(()=>{if(t.viewport&&t.isPositioned){let i=function(){const p=l.scrollHeight-l.clientHeight,x=Math.ceil(l.scrollTop)<p;d(x)};const l=t.viewport;return i(),l.addEventListener("scroll",i),()=>l.removeEventListener("scroll",i)}},[t.viewport,t.isPositioned]),a?e.jsx(rt,{...n,ref:s,onAutoScroll:()=>{const{viewport:i,selectedItem:l}=t;i&&l&&(i.scrollTop=i.scrollTop+l.offsetHeight)}}):null});nt.displayName=Ie;var rt=o.forwardRef((n,r)=>{const{__scopeSelect:t,onAutoScroll:c,...a}=n,d=Z("SelectScrollButton",t),s=o.useRef(null),i=pe(t),l=o.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return o.useEffect(()=>()=>l(),[l]),Y(()=>{var x;const p=i().find(S=>S.ref.current===document.activeElement);(x=p==null?void 0:p.ref.current)==null||x.scrollIntoView({block:"nearest"})},[i]),e.jsx(V.div,{"aria-hidden":!0,...a,ref:r,style:{flexShrink:0,...a.style},onPointerDown:R(a.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(c,50))}),onPointerMove:R(a.onPointerMove,()=>{var p;(p=d.onItemLeave)==null||p.call(d),s.current===null&&(s.current=window.setInterval(c,50))}),onPointerLeave:R(a.onPointerLeave,()=>{l()})})}),uo="SelectSeparator",st=o.forwardRef((n,r)=>{const{__scopeSelect:t,...c}=n;return e.jsx(V.div,{"aria-hidden":!0,...c,ref:r})});st.displayName=uo;var Te="SelectArrow",po=o.forwardRef((n,r)=>{const{__scopeSelect:t,...c}=n,a=fe(t),d=X(Te,t),s=Z(Te,t);return d.open&&s.position==="popper"?e.jsx(Lt,{...a,...c,ref:r}):null});po.displayName=Te;var fo="SelectBubbleInput",at=o.forwardRef(({__scopeSelect:n,value:r,...t},c)=>{const a=o.useRef(null),d=W(c,a),s=Wt(r);return o.useEffect(()=>{const i=a.current;if(!i)return;const l=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==r&&x){const S=new Event("change",{bubbles:!0});x.call(i,r),i.dispatchEvent(S)}},[s,r]),e.jsx(V.select,{...t,style:{...Et,...t.style},ref:d,defaultValue:r})});at.displayName=fo;function ct(n){return n===""||n===void 0}function lt(n){const r=Dt(n),t=o.useRef(""),c=o.useRef(0),a=o.useCallback(s=>{const i=t.current+s;r(i),function l(p){t.current=p,window.clearTimeout(c.current),p!==""&&(c.current=window.setTimeout(()=>l(""),1e3))}(i)},[r]),d=o.useCallback(()=>{t.current="",window.clearTimeout(c.current)},[]);return o.useEffect(()=>()=>window.clearTimeout(c.current),[]),[t,a,d]}function it(n,r,t){const a=r.length>1&&Array.from(r).every(p=>p===r[0])?r[0]:r,d=t?n.indexOf(t):-1;let s=mo(n,Math.max(d,0));a.length===1&&(s=s.filter(p=>p!==t));const l=s.find(p=>p.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==t?l:void 0}function mo(n,r){return n.map((t,c)=>n[(r+c)%n.length])}var ho=Oe,dt=Be,go=He,vo=Fe,xo=Ue,ut=We,wo=qe,pt=Xe,ft=Je,So=Qe,yo=tt,mt=ot,ht=nt,gt=st;const Co=ho,No=go,vt=o.forwardRef(({className:n,children:r,...t},c)=>e.jsxs(dt,{ref:c,className:q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[r,e.jsx(vo,{asChild:!0,children:e.jsx(ke,{className:"h-4 w-4 opacity-50"})})]}));vt.displayName=dt.displayName;const xt=o.forwardRef(({className:n,...r},t)=>e.jsx(mt,{ref:t,className:q("flex cursor-default items-center justify-center py-1",n),...r,children:e.jsx(Kt,{className:"h-4 w-4"})}));xt.displayName=mt.displayName;const wt=o.forwardRef(({className:n,...r},t)=>e.jsx(ht,{ref:t,className:q("flex cursor-default items-center justify-center py-1",n),...r,children:e.jsx(ke,{className:"h-4 w-4"})}));wt.displayName=ht.displayName;const St=o.forwardRef(({className:n,children:r,position:t="popper",...c},a)=>e.jsx(xo,{children:e.jsxs(ut,{ref:a,className:q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...c,children:[e.jsx(xt,{}),e.jsx(wo,{className:q("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(wt,{})]})}));St.displayName=ut.displayName;const Io=o.forwardRef(({className:n,...r},t)=>e.jsx(pt,{ref:t,className:q("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...r}));Io.displayName=pt.displayName;const yt=o.forwardRef(({className:n,children:r,...t},c)=>e.jsxs(ft,{ref:c,className:q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(yo,{children:e.jsx(Bt,{className:"h-4 w-4"})})}),e.jsx(So,{children:r})]}));yt.displayName=ft.displayName;const To=o.forwardRef(({className:n,...r},t)=>e.jsx(gt,{ref:t,className:q("-mx-1 my-1 h-px bg-muted",n),...r}));To.displayName=gt.displayName;const bo=({closedSize:n,placeholder:r,children:t,onValueChange:c})=>{const[a,d]=o.useState(!1),s=()=>{switch(n){case"xs":return"";case"sm":return"w-56";case"md":return"w-72";case"lg":return"w-96";default:return""}};return e.jsxs(e.Fragment,{children:[a&&e.jsx(Ft,{onClose:()=>d(!1),open:a}),e.jsxs(Co,{onOpenChange:d,open:a,onValueChange:i=>{c&&c(i)},children:[e.jsx(vt,{className:q(a?"z-[20] w-full sm:max-w-xs":s()),children:e.jsx(No,{placeholder:r})}),t]})]})},Eo=({networks:n,ssidCharacteristic:r,passwordCharacteristic:t,disconnect:c})=>{const[a,d]=o.useState(!1),s=o.useMemo(()=>n.filter(v=>v!=="").sort((v,y)=>v.localeCompare(y)),[n]),i=Vt(),[l,p]=o.useState(null),[x,S]=o.useState(null),E=async()=>{if(!r||!t){ne.error("Dispositivo não encontrado."),console.error("No device selected");return}if(!l||!x){ne.error("Preencha todos os campos."),console.error("Fields not filled");return}console.log("Sending credentials: ",{selectedNetwork:l,password:x}),d(!0);try{if(!r||!t)throw new Error("Characteristic not found");const v=new TextEncoder;await r.writeValueWithResponse(v.encode(l)),await t.writeValueWithResponse(v.encode(x)),ne.success("Credenciais enviadas com sucesso."),c(),i("/totems")}catch(v){ne.error("Erro ao enviar credenciais."),console.error("Failed to send credentials: ",v)}d(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"font-semibold text-2xl mx-auto",children:["Totem conectado ",e.jsx(zt,{className:"inline-block text-positive"})]}),e.jsx("p",{className:"text-sm",children:"Preencha os campos abaixo para conectar o totem à sua rede."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{title:e.jsxs("div",{className:"flex items-center gap-1",children:["Rede",e.jsx(_e,{size:14,className:"mb-4"})]}),tooltip:"A senha da rede que deseja conectar.",children:e.jsx(bo,{closedSize:"sm",placeholder:"Conectar a rede",onValueChange:v=>p(v),children:e.jsx(St,{children:s.map((v,y)=>e.jsx(yt,{value:v,children:v},y))})})}),e.jsx(je,{title:e.jsxs("div",{className:"flex items-center gap-1",children:["Senha",e.jsx(_e,{size:14,className:"mb-4"})]}),tooltip:"A senha da rede que deseja conectar.",children:e.jsx(Ut,{type:"text",placeholder:"Senha da rede",name:"password",required:!0,closedSize:"sm",onChange:v=>S(v.target.value)})}),e.jsxs("div",{className:"flex justify-between gap-2 pt-2",children:[e.jsx(Se,{className:"w-full",variant:"ghost",onClick:c,disabled:a,children:"Cancelar"}),e.jsxs(Se,{className:"w-full bg-white text-primary",onClick:E,disabled:a,children:[a?e.jsx(De,{className:"mr-2 h-4 w-4 animate-spin"}):null,a?"Enviando...":"Enviar"]})]})]})]})},Po=({isScanning:n,startScan:r})=>e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-2xl mx-auto",children:"Parear totem"}),e.jsx("p",{className:"text-sm",children:"Mantenha o botão de pareamento do totem pressionado até a luz piscar e clique no botão abaixo para iniciar a busca."}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs(Se,{onClick:r,disabled:n,className:"w-full bg-white text-primary hover:bg-gray-100 transition-colors",children:[n?e.jsx(De,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx($t,{className:"mr-2"}),n?"Escaneando...":"Iniciar busca"]})})]}),Fo=()=>{const[n,r]=o.useState([]),[t,c]=o.useState(!1),[a,d]=o.useState(null),[s,i]=o.useState(null),[l,p]=o.useState(!1),[x,S]=o.useState({}),E="376ef6fe-e050-47f3-b68d-de711430d4cf",v={LIST:"6db902b8-3853-4eaf-a55e-a48559fac157",SSID:"14796829-59dc-4f1b-90d8-e1f3a02f1248",PASSWORD:"839c314c-7b1d-40aa-8782-525e7bac8477"},y=o.useCallback(()=>{console.log("Disconnection event triggered"),p(!1),S({}),r([])},[]);o.useEffect(()=>()=>{s&&s.removeEventListener("gattserverdisconnected",y)},[s,y]);const u=async()=>{var m;try{(m=s==null?void 0:s.gatt)!=null&&m.connected&&(s.removeEventListener("gattserverdisconnected",y),await s.gatt.disconnect()),i(null)}catch(N){z(N)}finally{p(!1),S({}),r([])}},w=async m=>{if(!m.gatt)throw new Error("Bluetooth GATT not available");try{return await m.gatt.connect()}catch(N){console.error("Connection error:",N),await new Promise(I=>setTimeout(I,500));try{return await m.gatt.connect()}catch(I){throw new Error(`Failed to connect to device: ${I}`)}}},C=async(m,N,I=3)=>{var M;let H;for(let _=0;_<I;_++)try{return await m()}catch(k){if(H=k,console.warn(`GATT operation failed (attempt ${_+1}/${I}):`,k),(M=N.gatt)!=null&&M.connected)await new Promise(A=>setTimeout(A,300));else try{await w(N),await new Promise(A=>setTimeout(A,300))}catch(A){console.error("Reconnection failed:",A)}}throw new Error(`Operation failed after ${I} retries: ${H||"Unknown error"}`)},f=async m=>{const N=await m.readValue();return new TextDecoder("utf-8").decode(N).split(`
`).filter(Boolean)},h=async m=>{try{m.addEventListener("gattserverdisconnected",y);const N=await w(m),I=await C(()=>N.getPrimaryService(E),m),[H,M,_]=await Promise.all([C(()=>I.getCharacteristic(v.LIST),m),C(()=>I.getCharacteristic(v.SSID),m),C(()=>I.getCharacteristic(v.PASSWORD),m)]);S({ssid:M,password:_}),console.log("Reading network list...");const k=await f(H);console.log("Networks found:",k),r(k),p(!0)}catch(N){m.removeEventListener("gattserverdisconnected",y),z(N)}},O=async()=>{if(c(!0),d(null),r([]),s)try{console.log("Disconnecting existing device"),await u(),console.log("Device disconnected"),await new Promise(m=>setTimeout(m,500))}catch(m){console.error("Failed to disconnect device",m),ne.error("Error disconnecting device")}console.log("Requesting Bluetooth device...");try{const m=await navigator.bluetooth.requestDevice({optionalServices:[E],filters:[{manufacturerData:[{companyIdentifier:42678}]}]});console.log("Device found:",m),i(m),await h(m)}catch(m){z(m)}finally{c(!1)}},L=()=>{c(!1),u()},z=m=>{const N=m instanceof Error?m.message:"Unknown error occurred";let I=N;N.includes("GATT operation failed")?I="Erro de conexão. Por favor tente novamente. (Tente reiniciar o totem)":N.startsWith("User cancelled")&&(I="Operação cancelada pelo usuário"),d(I),console.error("Error details:",m),N.startsWith("User cancelled")||ne.error(I),L()};return e.jsxs("div",{className:"w-full flex flex-col items-center justify-center gap-3",children:[e.jsx(Ht,{border:!0,className:"flex-col flex gap-5 p-4 shadow-lg w-full max-w-md text-white",children:l?n.length>0?e.jsx(Eo,{networks:n,ssidCharacteristic:x.ssid,passwordCharacteristic:x.password,disconnect:u}):e.jsx("div",{children:"Algo deu errado"}):e.jsx(Po,{startScan:O,isScanning:t})}),a&&e.jsx("div",{className:"p-3 bg-white rounded-md animate-pulse",children:e.jsx("p",{className:"text-destructive font-medium",children:a})})]})};export{Fo as default};
