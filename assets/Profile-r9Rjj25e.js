const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B4JztHH_.js","assets/formatIncompletePhoneNumber-BGJ9JXRt.js","assets/index-CX7136yS.js","assets/react-C1_t6syo.js","assets/react-dom-DdM9RXEZ.js","assets/index-c8Wg5x5T.css","assets/index-DOCqERIz.js","assets/index-BgAacijC.js"])))=>i.map(i=>d[i]);
import{c as L,r as l,o as q,p as ee,j as e,q as te,l as _,t as F,v as re,w as se,m as P,C as z,g as ae,B as w,u as ne,f as C,e as M,x as oe,R as ie,_ as le}from"./index-CX7136yS.js";import{E as U}from"./ElementTitleHeader-SRMt7EM_.js";import{u as ce}from"./index-BYXgGKDX.js";import{M as de,W as ue}from"./WearableRefreshRate-6hpvotja.js";import{p as V}from"./pt-BR.json-Bqz2tW3U.js";import{I as B}from"./input-C3S2_bkE.js";import{H as T}from"./HorizontalDivider-BAWqLMTT.js";import{I as H,B as O,F as N}from"./Backdrop-WOqQ-gtS.js";import{$ as A}from"./module-CrP6acKI.js";import me,{formatPhoneNumber as he}from"./index-B4JztHH_.js";import{S as W}from"./settings-OPHUl-T5.js";import"./react-C1_t6syo.js";import"./react-dom-DdM9RXEZ.js";import"./index-BgAacijC.js";import"./alert-dialog-Db_hukuG.js";import"./formatIncompletePhoneNumber-BGJ9JXRt.js";import"./index-DOCqERIz.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=L("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=L("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);var S="Checkbox",[xe,Ve]=te(S),[ge,Ce]=xe(S),$=l.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:i,checked:n,defaultChecked:a,required:u,disabled:d,value:m="on",onCheckedChange:h,form:g,...f}=t,[o,c]=l.useState(null),p=q(s,x=>c(x)),j=l.useRef(!1),E=o?g||!!o.closest("form"):!0,[y,I]=ee({prop:n,defaultProp:a??!1,onChange:h,caller:S}),Z=l.useRef(y);return l.useEffect(()=>{const x=o==null?void 0:o.form;if(x){const v=()=>I(Z.current);return x.addEventListener("reset",v),()=>x.removeEventListener("reset",v)}},[o,I]),e.jsxs(ge,{scope:r,state:y,disabled:d,children:[e.jsx(_.button,{type:"button",role:"checkbox","aria-checked":b(y)?"mixed":y,"aria-required":u,"data-state":J(y),"data-disabled":d?"":void 0,disabled:d,value:m,...f,ref:p,onKeyDown:F(t.onKeyDown,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:F(t.onClick,x=>{I(v=>b(v)?!0:!v),E&&(j.current=x.isPropagationStopped(),j.current||x.stopPropagation())})}),E&&e.jsx(G,{control:o,bubbles:!j.current,name:i,value:m,checked:y,required:u,disabled:d,form:g,style:{transform:"translateX(-100%)"},defaultChecked:b(a)?!1:a})]})});$.displayName=S;var K="CheckboxIndicator",X=l.forwardRef((t,s)=>{const{__scopeCheckbox:r,forceMount:i,...n}=t,a=Ce(K,r);return e.jsx(re,{present:i||b(a.state)||a.state===!0,children:e.jsx(_.span,{"data-state":J(a.state),"data-disabled":a.disabled?"":void 0,...n,ref:s,style:{pointerEvents:"none",...t.style}})})});X.displayName=K;var be="CheckboxBubbleInput",G=l.forwardRef(({__scopeCheckbox:t,control:s,checked:r,bubbles:i=!0,defaultChecked:n,...a},u)=>{const d=l.useRef(null),m=q(d,u),h=ce(r),g=se(s);l.useEffect(()=>{const o=d.current;if(!o)return;const c=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(c,"checked").set;if(h!==r&&j){const E=new Event("click",{bubbles:i});o.indeterminate=b(r),j.call(o,b(r)?!1:r),o.dispatchEvent(E)}},[h,r,i]);const f=l.useRef(b(r)?!1:r);return e.jsx(_.input,{type:"checkbox","aria-hidden":!0,defaultChecked:n??f.current,...a,tabIndex:-1,ref:m,style:{...a.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});G.displayName=be;function b(t){return t==="indeterminate"}function J(t){return b(t)?"indeterminate":t?"checked":"unchecked"}var Q=$,je=X;const Y=l.forwardRef(({className:t,...s},r)=>e.jsx(Q,{ref:r,className:P("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-white data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(je,{className:P("flex items-center justify-center text-current"),children:e.jsx(z,{className:"h-4 w-4 text-primary",strokeWidth:4})})}));Y.displayName=Q.displayName;const R=({id:t,label:s,onChange:r,defaultChecked:i})=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{id:t,className:"h-5 w-5 bg-background border-border",onCheckedChange:n=>{if(n==="indeterminate"){r(!0);return}r(n)},defaultChecked:i}),e.jsx("label",{htmlFor:t,className:"leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:s})]}),k=({title:t,onChange:s,id:r,children:i})=>{const n=(a,u)=>{console.log("Alert type changed: ",a,u),s(a)};return e.jsxs(ae,{title:t,titleBackground:!0,border:!0,children:[i,e.jsxs("div",{className:"p-4 grid gap-4 grid-cols-2",children:[e.jsx(R,{id:r+"-notification",label:"Notificação",onChange:a=>{n("notification",a)},defaultChecked:!0}),e.jsx(R,{id:r+"-whatsapp",label:"WhatsApp",onChange:a=>{n("whatsapp",a)}}),e.jsx(R,{id:r+"-sms",label:"SMS",onChange:a=>{n("sms",a)}}),e.jsx(R,{id:r+"-email",label:"Email",onChange:a=>{n("email",a)}})]})]})},ye=()=>{const t=r=>`${r}%`,s=r=>{console.log("Refresh rate changed: ",r)};return e.jsx(de,{marks:[{percentage:5,label:"5%"},{percentage:15,label:"15%"},{percentage:25,label:"25%"},{percentage:35,label:"35%"}],tipParser:t,min:5,max:35,step:1,onChangeComplete:s,showTrack:!0})},ve=({value:t,onConfirm:s,onCancel:r,onChange:i})=>{const{isEditing:n,setIsEditing:a}=l.useContext(H),[u,d]=l.useState(t??""),[m,h]=l.useState(!1),g=()=>{a(!0),d(t??"")},f=()=>{s?(h(!0),s(u).finally(()=>{a(!1),h(!1)})):a(!1)},o=()=>{a(!1),d(t??""),r&&r()},c=p=>{d(p??""),i&&i(p??"")};return e.jsxs(e.Fragment,{children:[n&&e.jsx(O,{onClose:o,open:n,confirm:t!==u}),e.jsxs("form",{className:P("text-lg flex items-center",n?"rounded-md gap-2 z-[20] w-full sm:max-w-xs":"gap-4"),onSubmit:p=>{p.preventDefault(),f()},children:[n?e.jsx(me,{placeholder:"(99) 99999-9999",value:t,onChange:c,defaultCountry:"BR",labels:V,inputComponent:B,className:"w-full text-black",autoComplete:"tel",disabled:m}):e.jsx(e.Fragment,{children:he(t)}),n?e.jsx(w,{onClick:f,className:"[&_svg]:size-5 aspect-square",size:"icon",variant:"secondary",disabled:m,type:"submit",children:m?e.jsx(A,{strokeColor:"white"}):e.jsx(z,{})},"accept-button"):e.jsx(w,{onClick:g,className:"[&_svg]:size-5",size:"icon",variant:"secondary",type:"button",children:e.jsx(W,{})},"edit-button")]})]})},D=({value:t,onConfirm:s,onCancel:r,onChange:i})=>{const{isEditing:n,setIsEditing:a}=l.useContext(H),[u,d]=l.useState(t??""),[m,h]=l.useState(!1),g=()=>{a(!0),d(t??"")},f=()=>{s?(h(!0),s(u).finally(()=>{a(!1),h(!1)})):a(!1)},o=()=>{a(!1),d(t??""),r&&r()},c=p=>{d(p.target.value),i&&i(p.target.value)};return e.jsxs(e.Fragment,{children:[n&&e.jsx(O,{onClose:o,open:n,confirm:t!==u}),e.jsxs("form",{className:P("text-lg flex items-center",n?"rounded-md gap-2 z-[20] w-full sm:max-w-xs":"gap-4"),onSubmit:p=>{p.preventDefault(),f()},children:[n?e.jsx(B,{value:u,onChange:c,autoFocus:!0,className:"w-full"}):e.jsx(e.Fragment,{children:t}),n?e.jsx(w,{onClick:f,className:"[&_svg]:size-5 aspect-square",size:"icon",variant:"secondary",disabled:m,type:"submit",children:m?e.jsx(A,{strokeColor:"white"}):e.jsx(z,{})},"accept-button"):e.jsx(w,{onClick:g,className:"[&_svg]:size-5",size:"icon",variant:"secondary",type:"button",children:e.jsx(W,{})},"edit-button")]})]})},ke=()=>{const{session:t,user:s,setUser:r,loading:i}=ne(),[n,a]=l.useState(!1),u=l.useMemo(()=>i?"Carregando...":s?s.name:"",[s]),d=l.useMemo(()=>i?"Carregando...":t?t.user.email:"",[s]),m=l.useMemo(()=>i?"Carregando...":s?s.phone??"Não informado":"",[s]),h=async o=>{if(!s){C.error("Usuário não encontrado.");return}try{const c=await M(s.id,{name:o});if(c.error)throw c.error;if(c.data.length===0)throw new Error("User not found");r({...s,name:c.data[0].name}),C.success("Nome atualizado com sucesso.")}catch(c){console.error("Error updating user name: ",c),C.error("Erro ao atualizar nome. Tente novamente.")}},g=async o=>{if(!s){C.error("Usuário não encontrado.");return}try{const c=await M(s.id,{phone:o});if(c.error)throw c.error;if(c.data.length===0)throw new Error("User not found");r({...s,phone:c.data[0].phone}),C.success("Telefone atualizado com sucesso.")}catch(c){console.error("Error updating user phone: ",c),C.error("Erro ao atualizar telefone. Tente novamente.")}},f=async()=>{if(!d){C.error("Email não encontrado.");return}a(!0);try{const{error:o}=await oe(d);if(o)throw o;C.success("Email de troca de senha enviado com sucesso.")}catch(o){console.error("Error sending password reset email: ",o),C.error("Erro ao enviar email de recuperação de senha.")}a(!1)};return e.jsxs("div",{className:"space-y-2 md:mx-0",children:[e.jsx(N,{title:"Nome",children:e.jsx(D,{value:u,onConfirm:h})}),e.jsx(N,{title:"Email",children:e.jsx(D,{value:d,onConfirm:async o=>{alert("Salvando email"+o)}})}),e.jsx(N,{title:"Telefone",children:e.jsx(ve,{value:m,onConfirm:g})}),e.jsx(N,{title:"Senha",children:e.jsx(w,{variant:"secondary",size:"sm",onClick:f,disabled:n,children:n?e.jsxs(e.Fragment,{children:["Enviando ",e.jsx(A,{strokeColor:"white"})]}):e.jsxs(e.Fragment,{children:["Alterar senha",e.jsx(fe,{})]})})})]})},we=ie.lazy(()=>le(()=>import("./index-B4JztHH_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),He=()=>{const[t,s]=l.useState(),[r]=l.useState(!1),i=n=>{console.log("Alert type changed: ",n)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-white space-y-4 px-0 sm:px-2 mb-16 md:mb-0",children:[e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("h1",{className:"text-4xl font-semibold w-fit mx-auto",children:"Meu Perfil"}),e.jsx(pe,{className:"h-40 w-40 mx-auto",strokeWidth:.7})]}),e.jsx(ke,{}),e.jsx(T,{className:"sm:-mx-2 mt-8"}),e.jsx(U,{title:"Configuração de alertas",description:"Defina o tipo de alerta que será enviado quando um evento for detectado pela pulseira."}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx(k,{title:"Taxa de atualização",id:"fall-detection",onChange:i,children:e.jsx("div",{className:"py-4 px-6",children:e.jsx(ue,{})})}),e.jsx(k,{id:"battery-50",title:"50% de bateria",onChange:i}),e.jsx(k,{title:"Bateria baixa",id:"low-battery",onChange:i,children:e.jsx("div",{className:"py-4 px-6",children:e.jsx(ye,{})})}),e.jsx(k,{title:"Detecção de quedas",id:"fall-detection",onChange:i}),e.jsx(k,{id:"out-of-area",title:"Saiu da área de segurança",onChange:i})]}),e.jsx(T,{className:"sm:-mx-2 mt-8"}),e.jsx(U,{title:"Contato de Emergência",description:"Adicione um número de telefone para realizar uma discagem rápida."}),e.jsx("div",{children:e.jsx(l.Suspense,{fallback:e.jsx("div",{children:"Carregando..."}),children:e.jsx(we,{placeholder:"(99) 99999-9999",value:t,onChange:n=>s(n),defaultCountry:"BR",labels:V,inputComponent:B,className:"col-span-3 placeholder-red-200 text-black",autoComplete:"tel",disabled:r})})})]})})};export{He as default};
