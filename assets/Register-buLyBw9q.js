const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C4imkmB7.js","assets/formatIncompletePhoneNumber-jKePwQXa.js","assets/index-Y785xXkP.js","assets/react-C7sMpjI8.js","assets/react-dom-ThsgQk-A.js","assets/index-bIc2ByXk.css","assets/index-D1nAdeZa.js","assets/index-yVTYpdoT.js","assets/index-uSevEnuR.js"])))=>i.map(i=>d[i]);
import{x as v,_ as u,r as c,o as P,j as e,k as _,s as y,B as C,L as F,q as a,y as E,w as k}from"./index-Y785xXkP.js";import{L as t,P as h}from"./PasswordInput-DHPfDat5.js";import{I as d}from"./input-Di2k4zie.js";import{$ as L}from"./module-P7QP4oB8.js";import{p as R}from"./pt-BR.json-Bqz2tW3U.js";import{P as A}from"./pencil-DpnWQor2.js";import"./react-C7sMpjI8.js";import"./react-dom-ThsgQk-A.js";import"./eye-BaDmcywV.js";const B=v.lazy(()=>u(()=>import("./index-C4imkmB7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),z=()=>{const[s,m]=c.useState(!1),[o,x]=c.useState(),f=P(),g=async i=>{i.preventDefault();const n=new FormData(i.currentTarget),b=n.get("name"),j=n.get("email"),p=n.get("password"),w=n.get("password-confirm");if(p!==w){a.error("As senhas não coincidem.");return}if(!o){a.error("Preencha o campo de telefone.");return}const l=(await u(()=>import("./index-uSevEnuR.js"),__vite__mapDeps([8,1]))).parsePhoneNumber(o);if(console.log("Parsed phone: ",l),!l||!(l.isPossible()&&l.isValid())){a.error("Número de telefone inválido.");return}m(!0);let r;try{r=await E(b,j,o,p)}catch(N){console.error(N),a.error("Erro ao criar usuário.")}if(!r){console.error("Erro ao criar usuário."),a.error("Erro ao criar usuário."),m(!1);return}r.error&&(a.error(k(r.error)),console.error(r.error)),!r.error&&r.data&&(console.log(r.data),a.success("Usuário criado com sucesso."),f("/login")),m(!1)};return e.jsx(_,{className:"col-span-1 lg:col-span-2 p-4",border:!0,children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 w-full",children:[e.jsx("img",{src:y,alt:"proteja-logo",className:"max-h-20"}),e.jsx("h2",{className:" text-center text-3xl font-bold leading-9 tracking-tight text-white",children:"Registrar nova conta"}),e.jsxs("form",{className:"mt-2 space-y-4 w-full text-white",onSubmit:g,children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"name",className:"block text-sm font-medium leading-6",children:"Nome completo"}),e.jsx(d,{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,disabled:s,className:"bg-white/10 placeholder-white/50 border-white/20 mt-1"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"email",className:"block text-sm font-medium leading-6",children:"Email"}),e.jsx(d,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,disabled:s,className:"bg-white/10 placeholder-white/50 border-white/20 mt-1"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"phone",className:"text-right ",children:"Telefone (WhatsApp)"}),e.jsx(c.Suspense,{fallback:e.jsx("div",{children:"Carregando..."}),children:e.jsx(B,{placeholder:"(99) 99999-9999",value:o,onChange:i=>x(i),defaultCountry:"BR",labels:R,inputComponent:d,className:"col-span-3 placeholder-red-200 text-black",autoComplete:"tel",disabled:s})}),e.jsx("p",{className:"mt-1 text-sm text-muted",children:"Número de WhatsApp para contato."})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"password",className:"block text-sm font-medium leading-6",children:"Senha"}),e.jsx(h,{className:"mt-1",disabled:s,name:"password"}),e.jsx("p",{className:"mt-1 text-sm text-muted",children:"A senha deve conter no mínimo 6 caracteres."})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"password-confirmation",className:"block text-sm font-medium leading-6",children:"Confirme sua senha"}),e.jsx(h,{className:"mt-1",disabled:s,name:"password-confirm"})]}),e.jsx("div",{children:e.jsx(C,{type:"submit",className:"w-full bg-[#fff] text-[#7357FF] hover:bg-[#c2c2c2c2] mt-1",disabled:s,children:s?e.jsxs(e.Fragment,{children:[e.jsx(L,{ariaLabel:"submitting-spinner",strokeColor:"#7357FF"}),"Criando usuário..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{}),"Registrar"]})})})]}),e.jsxs("p",{className:"mt-10 text-center text-sm text-muted",children:["Já possui uma conta?"," ",e.jsx(F,{to:"/login",className:"font-bold leading-6 text-[#fff] hover:text-primary/20 hover:border-b border-primary/20",viewTransition:!0,children:"Faça login"})]})]})})};export{z as default};
