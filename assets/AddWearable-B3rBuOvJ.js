import{J as x,E as h,n as g,r as b,u as w,j as e,B as j,p as r,K as v}from"./index-BRmxdem8.js";import{E as N}from"./ElementTitleHeader-owh-jiUZ.js";import{M as E,H as k}from"./HardwarePassword-BnXqORVJ.js";import{W as y}from"./wristband_300-D3ygo3tb.js";import{$ as P}from"./module-CA0SzDSm.js";import{L as C}from"./link-DdZpcsdz.js";import"./react-DDCWQfk_.js";import"./react-dom-DxV6jaKz.js";import"./InformationContainer-C6uIso8U.js";import"./input-DXMXB5md.js";async function M(o,t,n){return await x.functions.invoke("set-device-owner",{body:{mac:o,password:t,owner:n}})}const T=()=>{const[o]=h(),t=g(),n=o.get("to"),[i,c]=b.useState(!1),{user:d}=w(),f=async m=>{m.preventDefault();const u=new FormData(m.currentTarget),a=u.get("mac"),l=u.get("password");if(console.log(a,l),!a||!l){r.error("Preencha todos os campos");return}if(!v(a)){r.error("Endereço MAC inválido");return}if(!d){r.error("Usuário não encontrado");return}try{c(!0);const s=await M(a,l,d.id);if(console.log(s),s.error){const p=await s.error.context.json();switch(console.log(p),p.error){case"Invalid credentials":r.error("Credenciais inválidas, verifique o endereço MAC e a senha");break;default:r.error("Erro ao adicionar pulseira");break}c(!1);return}r.success("Pulseira adicionada com sucesso"),t(n||"/dashboard")}catch(s){console.error(s),r.error("Erro ao adicionar pulseira, tente novamente mais tarde")}c(!1)};return e.jsx("form",{onSubmit:f,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(N,{className:"pb-2 text-white",title:"Pulseira",titleAppend:e.jsx("div",{className:"flex gap-2 border rounded-md px-2 items-center text-lg font-medium leading-none h-7",children:e.jsx(C,{className:"stroke-white w-5 h-5"})})}),e.jsx("img",{src:y,alt:"Pulseira",className:"w-64 h-auto"})]}),e.jsx(E,{name:"mac"}),e.jsx(k,{name:"password"}),e.jsx("div",{className:"flex flex-row-reverse w-full",children:e.jsx(j,{className:"bg-white text-primary",type:"submit",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(P,{ariaLabel:"submitting-spinner",strokeColor:"#7357FF"}),"Carregando..."]}):e.jsx(e.Fragment,{children:"Confirmar"})})})]})})};export{T as default};
