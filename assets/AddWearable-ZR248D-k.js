import{F as f,o as h,r as g,u as b,j as e,B as w,q as r,K as j}from"./index-uK6KrvtY.js";import{E as v}from"./ElementTitleHeader-BMIW-P1G.js";import{M as N,H as E,s as P}from"./devices-DlUUTlbK.js";import{W as k}from"./wristband_300-D3ygo3tb.js";import{$ as C}from"./module-BDisjovG.js";import{L as F}from"./link-DGWqkKsi.js";import"./react-DDCWQfk_.js";import"./react-dom-DxV6jaKz.js";import"./input-B4bQcZNA.js";import"./Backdrop-BtNwZ8JP.js";import"./settings-X4DykvHX.js";const I=()=>{const[m]=f(),u=h(),p=m.get("to"),[i,o]=g.useState(!1),{user:n}=b(),x=async c=>{c.preventDefault();const l=new FormData(c.currentTarget),a=l.get("mac"),t=l.get("password");if(console.log(a,t),!a||!t){r.error("Preencha todos os campos");return}if(!j(a)){r.error("Endereço MAC inválido");return}if(!n){r.error("Usuário não encontrado");return}try{o(!0);const s=await P(a,t,n.id);if(console.log(s),s.error){const d=await s.error.context.json();switch(console.log(d),d.error){case"Invalid credentials":r.error("Credenciais inválidas, verifique o endereço MAC e a senha");break;default:r.error("Erro ao adicionar pulseira");break}o(!1);return}r.success("Pulseira adicionada com sucesso"),u(p||`/dashboard/edit-wearable/${a}`)}catch(s){console.error(s),r.error("Erro ao adicionar pulseira, tente novamente mais tarde")}o(!1)};return e.jsx("form",{onSubmit:x,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(v,{className:"pb-2 text-white",title:"Pulseira",titleAppend:e.jsx("div",{className:"flex gap-2 border rounded-md px-2 items-center text-lg font-medium leading-none h-7",children:e.jsx(F,{className:"stroke-white w-5 h-5"})})}),e.jsx("img",{src:k,alt:"Pulseira",className:"w-64 h-auto"})]}),e.jsx(N,{name:"mac"}),e.jsx(E,{name:"password"}),e.jsx("div",{className:"flex flex-row-reverse w-full",children:e.jsx(w,{className:"bg-white text-primary",type:"submit",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(C,{ariaLabel:"submitting-spinner",strokeColor:"#7357FF"}),"Carregando..."]}):e.jsx(e.Fragment,{children:"Confirmar"})})})]})})};export{I as default};
