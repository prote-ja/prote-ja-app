import{w as f,x,l as h,r as g,j as e,B as w,n as r}from"./index-DqAxSdWb.js";import{E as b}from"./ElementTitleHeader-xpHiBEH5.js";import{M as j,H as v}from"./HardwarePassword-C3h-3HF7.js";import{W as N}from"./wristband_300-D3ygo3tb.js";import{c as k}from"./helpers-8UbxL0OI.js";import{$ as y}from"./module-BE2AiDXj.js";import{L as E}from"./link-DOZefxXH.js";import"./react-DDCWQfk_.js";import"./react-dom-DxV6jaKz.js";import"./InformationContainer-DP4YAlcx.js";import"./input-VWHlOFM_.js";import"./check-9wOPdwzz.js";async function P(o,t){return await f.functions.invoke("set-device-owner",{body:{mac:o,password:t}})}const T=()=>{const[o]=x(),t=h(),c=o.get("to"),[l,n]=g.useState(!1),u=async d=>{d.preventDefault();const m=new FormData(d.currentTarget),s=m.get("mac"),i=m.get("password");if(console.log(s,i),!s||!i){r.error("Preencha todos os campos");return}if(!k(s)){r.error("Endereço MAC inválido");return}try{n(!0);const a=await P(s,i);if(console.log(a),a.error){const p=await a.error.context.json();switch(console.log(p),p.error){case"Invalid credentials":r.error("Credenciais inválidas, verifique o endereço MAC e a senha");break;default:r.error("Erro ao adicionar pulseira");break}n(!1);return}r.success("Pulseira adicionada com sucesso"),t(c||"/dashboard")}catch(a){console.error(a),r.error("Erro ao adicionar pulseira, tente novamente mais tarde")}n(!1)};return e.jsx("form",{onSubmit:u,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(b,{className:"pb-2 text-white",title:"Pulseira",titleAppend:e.jsx("div",{className:"flex gap-2 border rounded-md px-2 items-center text-lg font-medium leading-none h-7",children:e.jsx(E,{className:"stroke-white w-5 h-5"})})}),e.jsx("img",{src:N,alt:"Pulseira",className:"w-64 h-auto"})]}),e.jsx(j,{name:"mac"}),e.jsx(v,{name:"password"}),e.jsx("div",{className:"flex flex-row-reverse w-full",children:e.jsx(w,{className:"bg-white text-primary",type:"submit",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(y,{ariaLabel:"submitting-spinner",strokeColor:"#7357FF"}),"Carregando..."]}):e.jsx(e.Fragment,{children:"Confirmar"})})})]})})};export{T as default};
