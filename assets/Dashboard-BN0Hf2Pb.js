import{r as g,j as e,u as h,a as p,b as u,B as m}from"./index-CI2zNLdG.js";import{A as o,a as t,b as a,c as n,d as c,e as l,f as d,g as x}from"./alert-dialog-DK9AbufH.js";import"./react-DDCWQfk_.js";import"./react-dom-DZBigVa_.js";const j=()=>{const[r,i]=g.useState(Notification.permission!=="granted");return Notification.permission==="granted"?null:Notification.permission==="denied"?e.jsx(o,{open:r,children:e.jsxs(t,{children:[e.jsxs(a,{children:[e.jsx(n,{children:"Atenção, você está desprotegido(a)"}),e.jsx(c,{children:"Parece que você negou a permissão de notificações. Ative as notificações do aplicativo no seu dispositivo."})]}),e.jsx(l,{children:e.jsx(d,{onClick:()=>i(!1),children:"Entendi, vou corrigir."})})]})}):e.jsx(o,{open:r,children:e.jsxs(t,{children:[e.jsxs(a,{children:[e.jsx(n,{children:"Atenção, você está desprotegido(a)"}),e.jsx(c,{children:"Precisamos de permissão para enviar notificações."})]}),e.jsxs(l,{children:[e.jsx(x,{onClick:()=>i(!1),children:"Ignorar"}),e.jsx(d,{onClick:()=>i(!1),children:"Já Permiti"})]})]})})},E=()=>{const{user:r,setUser:i}=h(),f=p();return g.useEffect(()=>{(async()=>{if(r&&r.first_login)try{const s=await u(r.id,{first_login:!1});if(s.error)throw new Error(s.error.message);console.log("return from edit",s.data[0]),console.log("user before set",r),i(s.data[0]),f("/first-login",{replace:!0})}catch(s){console.error(s),m.error("Erro ao atualizar status de primeiro login")}})()},[r]),e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsx("div",{className:"mb-16 md:mb-0",children:e.jsx("h1",{className:"text-white",children:"Dashboard"})})]})};export{E as default};
