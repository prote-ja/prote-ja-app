import{r as i,a4 as j,F as g,a as v,j as e,G as T,T as N,H as b,f as m,I as w,J as y,B as C,a5 as E}from"./index-DCtF9MoZ.js";import{E as x}from"./ElementTitleHeader-D5IxnMyj.js";import{F as S}from"./Backdrop-CgpKtQEg.js";import{$ as A}from"./module-CaSE05gb.js";import{F}from"./FieldContainerInput-0QPxKwRH.js";import{A as k,b as I,S as z,c as B}from"./SharedDeviceUsersList-D3jjc3Fp.js";import{H as u}from"./HorizontalDivider-QXnCEGiH.js";import"./react-C7sMpjI8.js";import"./react-dom-ThsgQk-A.js";import"./alert-dialog-D5d96C_5.js";import"./input-DxDS0ryq.js";import"./eye-dDXEiG5A.js";import"./pencil-PKZs1Rh-.js";import"./clock-BZHMpNF5.js";import"./share-2-D0VUjm5m.js";function H(t){const[l,a]=i.useState(null),[o,c]=i.useState(!0);return i.useEffect(()=>{if(!t)return;(async()=>{c(!0);try{const r=await j(t);r.error?(console.error("Error fetching totem:",r.error),a(null)):a(r.data)}catch(r){console.error("Unexpected error fetching totem:",r),a(null)}finally{c(!1)}})()},[t]),{totem:l,loading:o}}const X=()=>{var d;const{id:t}=g(),[l,a]=i.useState(!1),{totem:o,loading:c}=H(t),[s,r]=i.useState(null);i.useEffect(()=>{o&&r(o.name)},[o]);const h=v();if(!t)return e.jsx("div",{className:"text-white",children:"Totem não encontrado"});if(c)return e.jsx("div",{children:"Carregando..."});if(!o)return e.jsx("div",{className:"text-white",children:"Totem não encontrado"});const f=async n=>{r(n)},p=async()=>{if(s&&t){a(!0);try{await E(t,{name:s}),m.success("Totem atualizado com sucesso"),h("/totems")}catch(n){console.error("Error updating totem:",n),m.error("Erro ao atualizar o totem")}finally{a(!1)}}};return e.jsxs("div",{className:"space-y-3 text-white",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(x,{className:"text-white",title:s||"Sem nome"}),e.jsx(k,{className:"h-36 w-36 mt-6 mb-3 border-2 border-white shadow-md",children:e.jsx(I,{className:"text-white text-7xl font-semibold bg-white/10",children:(d=T(s||"Sem nome"))==null?void 0:d.slice(0,2)})}),e.jsxs(N,{children:[e.jsx(b,{onClick:()=>{navigator.clipboard.writeText(t??""),m.success("Endereço MAC copiado para a área de transferência")},children:e.jsx("div",{className:"flex items-center justify-center border rounded-md px-2 text-white ",children:t})}),e.jsxs(w,{side:"bottom",children:[e.jsx("p",{children:"Endereço MAC"}),e.jsx(y,{className:"stroke-white fill-white"})]})]})]}),e.jsx(u,{className:"my-7"}),e.jsx(S,{title:"Nome",children:e.jsx(F,{value:s??"Sem Nome",onChange:n=>f(n.target.value),type:"text",placeholder:"Totem Padrão"})}),e.jsx(u,{className:"mt-8"}),e.jsx(x,{title:"Compartilhamento",description:"Aqui estão as pessoas com quem você compartilhou este totem."}),e.jsx(z,{id:t}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(C,{className:"bg-white text-primary",onClick:p,disabled:l,children:l?e.jsxs(e.Fragment,{children:["Atualizando ",e.jsx(A,{strokeColor:"#4b33be"})]}):e.jsxs(e.Fragment,{children:["Salvar ",e.jsx(B,{})]})})})]})};export{X as default};
