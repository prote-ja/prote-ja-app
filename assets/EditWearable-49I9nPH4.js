import{c as w,r as d,j as e,B as x,h as b,o as S,w as y}from"./index-7oTZLQlb.js";import{I as g,S as E}from"./InformationContainer-DAAwSkRV.js";import{E as k}from"./ElementTitleHeader-DZ92hEj3.js";import{I as j}from"./input-CYub1lhk.js";import"./react-DDCWQfk_.js";import"./react-dom-DxV6jaKz.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=w("CircleUserRound",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=w("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),B=()=>{const[a,n]=d.useState("DD/MM/YYYY"),[u,o]=d.useState(!1),f=r=>{if(!/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/.test(r))return!1;const t=parseInt(r.split("/")[2],10);return t>=1900&&t<=2025},c=r=>{let t=r.replace(/[^0-9]/g,"");return t.length>=3&&t.length<=4?t=`${t.substring(0,2)}/${t.substring(2)}`:t.length>=5&&t.length<=6?t=`${t.substring(0,2)}/${t.substring(2,4)}/${t.substring(4)}`:t.length>6&&(t=`${t.substring(0,2)}/${t.substring(2,4)}/${t.substring(4,8)}`),t},i=r=>{const l=c(r);n(l)},s=()=>o(!0),m=()=>{f(a)&&o(!1)};return e.jsx("div",{className:"space-y-4",children:e.jsx(g,{name:e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("span",{children:"Data de Nascimento"})}),value:u?e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-1.5",children:[e.jsx(j,{value:a,onChange:r=>i(r.target.value),placeholder:"DD/MM/YYYY",className:"w-64 sm:w-64"}),e.jsx(x,{variant:"secondary",onClick:m,className:"w-full sm:w-auto",disabled:!f(a),children:"Salvar"}),!f(a)&&e.jsx("span",{className:"text-red-500 text-sm mt-2",children:"A data precisa estar no formato DD/MM/YYYY"})]}):e.jsx(x,{variant:"secondary",onClick:s,className:"w-32 max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap",title:a,children:a})})})},C=({inputState:a,placeholder:n,onSave:u})=>{const[o,f]=d.useState(!1),[c,i]=d.useState(a),[s,m]=d.useState(""),r=/^.{0,32}$/,l=()=>{c.length>32?m("O valor não pode exceder 32 caracteres."):(m(""),u(c),f(!1))},t=p=>{const h=p.target.value;r.test(h)?(i(h),m("")):m("O valor não pode exceder 32 caracteres.")};return e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-1.5",children:[o?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(j,{value:c,onChange:t,placeholder:n,className:"w-64 sm:w-64"}),e.jsx(x,{variant:"secondary",onClick:l,className:"w-full sm:w-auto",children:"Salvar"})]}):e.jsx(x,{variant:"secondary",onClick:()=>f(!0),className:"w-32 max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap",children:c}),s&&e.jsx("span",{className:"text-red-500 text-sm",children:s})," "]})},I=({textAreaRef:a,triggerAutoSize:n,maxHeight:u=Number.MAX_SAFE_INTEGER,minHeight:o=0})=>{const[f,c]=d.useState(!0);d.useEffect(()=>{const s=a.current;if(s){f&&(s.style.minHeight=`${o+6}px`,u>o&&(s.style.maxHeight=`${u}px`),c(!1)),s.style.height=`${o+6}px`;const m=s.scrollHeight;m>u?s.style.height=`${u}px`:s.style.height=`${m+6}px`}},[a.current,n])},N=d.forwardRef(({maxHeight:a=Number.MAX_SAFE_INTEGER,minHeight:n=52,className:u,onChange:o,value:f,...c},i)=>{const s=d.useRef(null),[m,r]=d.useState("");return I({textAreaRef:s,triggerAutoSize:m,maxHeight:a,minHeight:n}),d.useImperativeHandle(i,()=>({textArea:s.current,focus:()=>{var l;return(l=s==null?void 0:s.current)==null?void 0:l.focus()},maxHeight:a,minHeight:n})),d.useEffect(()=>{r(f)},[c==null?void 0:c.defaultValue,f]),e.jsx("textarea",{...c,value:f,ref:s,className:b("flex text-white w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",u),onChange:l=>{r(l.target.value),o==null||o(l)}})});N.displayName="AutosizeTextarea";const U=({onEdit:a,name:n,value:u})=>e.jsx(S,{cornerType:"square",children:e.jsxs("div",{className:"flex flex-col py-2 px-3 text-white",children:[e.jsx("p",{className:"text-lg font-medium mb-4",children:n}),e.jsx("div",{className:"flex flex-col w-full gap-1.5",children:u}),a&&e.jsx(x,{onClick:a,className:"[&_svg]:size-5",size:"icon",variant:"secondary",children:e.jsx(E,{})})]})}),R=({url:a,size:n,onUpload:u})=>{const[o,f]=d.useState(null),[c,i]=d.useState(!1);d.useEffect(()=>{a&&s(a)},[a]);async function s(r){try{const{data:l,error:t}=await y.storage.from("avatars").download(r);if(t)throw t;const p=URL.createObjectURL(l);f(p)}catch(l){console.log("Error downloading image: ",l.message)}}async function m(r){try{if(i(!0),!r.target.files||r.target.files.length===0)throw new Error("You must select an image to upload.");const l=r.target.files[0],t=l.name.split(".").pop(),h=`avatars/${`${Math.random()}.${t}`}`,{error:v}=await y.storage.from("avatars").upload(h,l);if(v)throw v;u(r,h)}catch(l){alert(l.message)}finally{i(!1)}}return e.jsxs("div",{children:[o?e.jsx("img",{src:o,alt:"Avatar",className:"avatar image",style:{height:n,width:n,borderRadius:"50%"}}):e.jsx("div",{className:"avatar no-image",style:{height:n,width:n,borderRadius:"50%"}}),e.jsx("div",{style:{width:n},children:e.jsx("input",{style:{visibility:"hidden",position:"absolute"},type:"file",id:"upload-avatar",accept:"image/*",onChange:m,disabled:c})})]})},_=()=>{const[a,n]=d.useState("Nome"),u=i=>{n(i)},[o,f]=d.useState(null),c=(i,s)=>{f(s),console.log("Arquivo enviado para o caminho:",s)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(k,{className:"pb-2 text-white",title:a}),o?e.jsx(R,{url:o,size:160,onUpload:c}):e.jsx(A,{className:"w-64 h-auto stroke-white stroke-1"})]}),e.jsx(g,{name:"Usuário",value:e.jsx(C,{inputState:a,placeholder:"Nome",onSave:u})}),e.jsx(B,{}),e.jsx(g,{name:"Foto de Perfil",value:e.jsxs(x,{variant:"secondary",className:"w-32 max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap",onClick:()=>{var i;return(i=document.getElementById("upload-avatar"))==null?void 0:i.click()},children:["Upload ",e.jsx($,{className:"stroke-white w-5 h-5"})]})}),e.jsx("input",{id:"upload-avatar",type:"file",accept:"image/*",style:{display:"none"},onChange:i=>{i.target.files&&c(i,URL.createObjectURL(i.target.files[0]))}}),e.jsx(U,{name:"Informações Adicionais",value:e.jsx(N,{placeholder:"Digite informações adicionais sobre o usuário",className:"w-full"})})]})};export{_ as default};
