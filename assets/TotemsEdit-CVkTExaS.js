import{r as i,ai as j,a1 as g,a as v,j as e,a2 as N,a3 as T,a4 as b,f as m,a5 as w,a6 as y,B as C,aj as E}from"./index-CX7136yS.js";import{E as x}from"./ElementTitleHeader-SRMt7EM_.js";import{F as S}from"./Backdrop-WOqQ-gtS.js";import{$ as A}from"./module-CrP6acKI.js";import{F}from"./FieldContainerInput-B8kVOc1w.js";import{A as k,b as z,S as B,c as I}from"./SharedDeviceUsersList-BOZZGOzi.js";import{H as u}from"./HorizontalDivider-BAWqLMTT.js";import"./react-C1_t6syo.js";import"./react-dom-DdM9RXEZ.js";import"./alert-dialog-Db_hukuG.js";import"./input-C3S2_bkE.js";import"./eye-BFEozk2j.js";import"./pencil-DTRi8A2r.js";import"./clock-C2HRd1C0.js";import"./chevron-down-DF9jD1R2.js";import"./share-2-CZs4e3SM.js";function L(t){const[l,s]=i.useState(null),[o,c]=i.useState(!0);return i.useEffect(()=>{if(!t)return;(async()=>{c(!0);try{const r=await j(t);r.error?(console.error("Error fetching totem:",r.error),s(null)):s(r.data)}catch(r){console.error("Unexpected error fetching totem:",r),s(null)}finally{c(!1)}})()},[t]),{totem:l,loading:o}}const Y=()=>{var d;const{id:t}=g(),[l,s]=i.useState(!1),{totem:o,loading:c}=L(t),[a,r]=i.useState(null);i.useEffect(()=>{o&&r(o.name)},[o]);const h=v();if(!t)return e.jsx("div",{className:"text-white",children:"Totem não encontrado"});if(c)return e.jsx("div",{children:"Carregando..."});if(!o)return e.jsx("div",{className:"text-white",children:"Totem não encontrado"});const f=async n=>{r(n)},p=async()=>{if(a&&t){s(!0);try{await E(t,{name:a}),m.success("Totem atualizado com sucesso"),h("/totems")}catch(n){console.error("Error updating totem:",n),m.error("Erro ao atualizar o totem")}finally{s(!1)}}};return e.jsxs("div",{className:"space-y-3 text-white",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(x,{className:"text-white",title:a||"Sem nome"}),e.jsx(k,{className:"h-36 w-36 mt-6 mb-3 border-2 border-white shadow-md",children:e.jsx(z,{className:"text-white text-7xl font-semibold bg-white/10",children:(d=N(a||"Sem nome"))==null?void 0:d.slice(0,2)})}),e.jsxs(T,{children:[e.jsx(b,{onClick:()=>{navigator.clipboard.writeText(t??""),m.success("Endereço MAC copiado para a área de transferência")},children:e.jsx("div",{className:"flex items-center justify-center border rounded-md px-2 text-white ",children:t})}),e.jsxs(w,{side:"bottom",children:[e.jsx("p",{children:"Endereço MAC"}),e.jsx(y,{className:"stroke-white fill-white"})]})]})]}),e.jsx(u,{className:"my-7"}),e.jsx(S,{title:"Nome",children:e.jsx(F,{value:a??"Sem Nome",onChange:n=>f(n.target.value),type:"text",placeholder:"Totem Padrão"})}),e.jsx(u,{className:"mt-8"}),e.jsx(x,{title:"Compartilhamento",description:"Aqui estão as pessoas com quem você compartilhou este totem."}),e.jsx(B,{id:t}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(C,{className:"bg-white text-primary",onClick:p,disabled:l,children:l?e.jsxs(e.Fragment,{children:["Atualizando ",e.jsx(A,{strokeColor:"#4b33be"})]}):e.jsxs(e.Fragment,{children:["Salvar ",e.jsx(I,{})]})})})]})};export{Y as default};
