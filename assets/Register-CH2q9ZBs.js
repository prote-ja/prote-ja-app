const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BeEy8U9A.js","assets/formatIncompletePhoneNumber-CO6KxHP7.js","assets/index-D7Yp8jQw.js","assets/react-DDCWQfk_.js","assets/react-dom-DZBigVa_.js","assets/index-CvZAbrBV.css","assets/index-D6r3sWpr.js","assets/index-DkU7GfEn.js","assets/index-CiZ3XbJJ.js"])))=>i.map(i=>d[i]);
import{r as c,a as v,j as e,f as P,P as _,R as C,B as F,g as y,e as a,_ as u,i as E,h as R}from"./index-D7Yp8jQw.js";import{L as t,P as h}from"./PasswordInput-C80lLdj-.js";import{I as d}from"./input-C18XhAi5.js";import{$ as k}from"./module-BCK5vQsl.js";import{p as L}from"./pt-BR.json-Bqz2tW3U.js";import{P as A}from"./pencil-CrJatnSm.js";import"./react-DDCWQfk_.js";import"./react-dom-DZBigVa_.js";import"./eye-DClkKJtw.js";const B=C.lazy(()=>u(()=>import("./index-BeEy8U9A.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),z=()=>{const[s,m]=c.useState(!1),[o,x]=c.useState(),f=v(),g=async n=>{n.preventDefault();const i=new FormData(n.currentTarget),b=i.get("name"),j=i.get("email"),p=i.get("password"),N=i.get("password-confirm");if(p!==N){a.error("As senhas não coincidem.");return}if(!o){a.error("Preencha o campo de telefone.");return}const l=(await u(()=>import("./index-CiZ3XbJJ.js"),__vite__mapDeps([8,1]))).parsePhoneNumber(o);if(console.log("Parsed phone: ",l),!l||!(l.isPossible()&&l.isValid())){a.error("Número de telefone inválido.");return}m(!0);let r;try{r=await E(b,j,o,p)}catch(w){console.error(w),a.error("Erro ao criar usuário.")}if(!r){console.error("Erro ao criar usuário."),a.error("Erro ao criar usuário."),m(!1);return}r.error&&(a.error(R(r.error)),console.error(r.error)),!r.error&&r.data&&(console.log(r.data),a.success("Usuário criado com sucesso."),f("/login")),m(!1)};return e.jsx(P,{className:"col-span-1 lg:col-span-2 p-4",border:!0,children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 w-full",children:[e.jsx("img",{src:_,alt:"proteja-logo",className:"max-h-20"}),e.jsx("h2",{className:" text-center text-3xl font-bold leading-9 tracking-tight text-white",children:"Registrar nova conta"}),e.jsxs("form",{className:"mt-2 space-y-4 w-full text-white",onSubmit:g,children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"name",className:"block text-sm font-medium leading-6",children:"Nome completo"}),e.jsx(d,{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,disabled:s,className:"bg-white/10 placeholder-white/50 border-white/20 mt-1"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"email",className:"block text-sm font-medium leading-6",children:"Email"}),e.jsx(d,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,disabled:s,className:"bg-white/10 placeholder-white/50 border-white/20 mt-1"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"phone",className:"text-right ",children:"Telefone (WhatsApp)"}),e.jsx(c.Suspense,{fallback:e.jsx("div",{children:"Carregando..."}),children:e.jsx(B,{placeholder:"(99) 99999-9999",value:o,onChange:n=>x(n),defaultCountry:"BR",labels:L,inputComponent:d,className:"col-span-3 placeholder-red-200 text-black",autoComplete:"tel",disabled:s})}),e.jsx("p",{className:"mt-1 text-sm text-muted",children:"Número de WhatsApp para contato."})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"password",className:"block text-sm font-medium leading-6",children:"Senha"}),e.jsx(h,{className:"mt-1",disabled:s,name:"password"}),e.jsx("p",{className:"mt-1 text-sm text-muted",children:"A senha deve conter no mínimo 6 caracteres."})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"password-confirmation",className:"block text-sm font-medium leading-6",children:"Confirme sua senha"}),e.jsx(h,{className:"mt-1",disabled:s,name:"password-confirm"})]}),e.jsx("div",{children:e.jsx(F,{type:"submit",className:"w-full bg-[#fff] text-[#7357FF] hover:bg-[#c2c2c2c2] mt-1",disabled:s,children:s?e.jsxs(e.Fragment,{children:[e.jsx(k,{ariaLabel:"submitting-spinner",strokeColor:"#7357FF"}),"Criando usuário..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{}),"Registrar"]})})})]}),e.jsxs("p",{className:"mt-10 text-center text-sm text-muted",children:["Já possui uma conta?"," ",e.jsx(y,{to:"/login",className:"font-bold leading-6 text-[#fff] hover:text-primary/20 hover:border-b border-primary/20",viewTransition:!0,children:"Faça login"})]})]})})};export{z as default};
