const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CYD-WjRl.js","assets/formatIncompletePhoneNumber-jKePwQXa.js","assets/index-DNAhENDT.js","assets/react-C7sMpjI8.js","assets/react-dom-ThsgQk-A.js","assets/index-C1dvMhUt.css","assets/index-D1nAdeZa.js","assets/index-yVTYpdoT.js"])))=>i.map(i=>d[i]);
import{c as U,o as Y,r as c,p as Z,q as ee,j as e,l as q,t as B,v as te,w as se,m as N,C as R,g as re,B as v,u as ae,f as C,e as F,x as ne,R as oe,_ as ie}from"./index-DNAhENDT.js";import{E as M}from"./ElementTitleHeader-DI859LyG.js";import{u as ce}from"./index-DMLd8nL5.js";import{M as le,W as de}from"./WearableRefreshRate-BjpMKBFn.js";import{p as L}from"./pt-BR.json-Bqz2tW3U.js";import{I}from"./input-DbxTFjb-.js";import{H as D}from"./HorizontalDivider-D_e7rqY2.js";import{I as V,B as H,F as w}from"./Backdrop-BVlBnENP.js";import{$ as z}from"./module-HKXdmItL.js";import ue,{formatPhoneNumber as me}from"./index-CYD-WjRl.js";import{S as O}from"./settings-CMG2WNaU.js";import"./react-C7sMpjI8.js";import"./react-dom-ThsgQk-A.js";import"./index-yVTYpdoT.js";import"./alert-dialog-Cva_lt_P.js";import"./formatIncompletePhoneNumber-jKePwQXa.js";import"./index-D1nAdeZa.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=U("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=U("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);var _="Checkbox",[fe,Le]=Y(_),[xe,ge]=fe(_),W=c.forwardRef((t,r)=>{const{__scopeCheckbox:s,name:o,checked:n,defaultChecked:a,required:u,disabled:d,value:m="on",onCheckedChange:f,form:p,...x}=t,[i,l]=c.useState(null),h=Z(r,g=>l(g)),P=c.useRef(!1),A=i?p||!!i.closest("form"):!0,[j=!1,S]=ee({prop:n,defaultProp:a,onChange:f}),Q=c.useRef(j);return c.useEffect(()=>{const g=i==null?void 0:i.form;if(g){const y=()=>S(Q.current);return g.addEventListener("reset",y),()=>g.removeEventListener("reset",y)}},[i,S]),e.jsxs(xe,{scope:s,state:j,disabled:d,children:[e.jsx(q.button,{type:"button",role:"checkbox","aria-checked":b(j)?"mixed":j,"aria-required":u,"data-state":X(j),"data-disabled":d?"":void 0,disabled:d,value:m,...x,ref:h,onKeyDown:B(t.onKeyDown,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:B(t.onClick,g=>{S(y=>b(y)?!0:!y),A&&(P.current=g.isPropagationStopped(),P.current||g.stopPropagation())})}),A&&e.jsx(Ce,{control:i,bubbles:!P.current,name:o,value:m,checked:j,required:u,disabled:d,form:p,style:{transform:"translateX(-100%)"},defaultChecked:b(a)?!1:a})]})});W.displayName=_;var $="CheckboxIndicator",K=c.forwardRef((t,r)=>{const{__scopeCheckbox:s,forceMount:o,...n}=t,a=ge($,s);return e.jsx(te,{present:o||b(a.state)||a.state===!0,children:e.jsx(q.span,{"data-state":X(a.state),"data-disabled":a.disabled?"":void 0,...n,ref:r,style:{pointerEvents:"none",...t.style}})})});K.displayName=$;var Ce=t=>{const{control:r,checked:s,bubbles:o=!0,defaultChecked:n,...a}=t,u=c.useRef(null),d=ce(s),m=se(r);c.useEffect(()=>{const p=u.current,x=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(x,"checked").set;if(d!==s&&l){const h=new Event("click",{bubbles:o});p.indeterminate=b(s),l.call(p,b(s)?!1:s),p.dispatchEvent(h)}},[d,s,o]);const f=c.useRef(b(s)?!1:s);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??f.current,...a,tabIndex:-1,ref:u,style:{...t.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(t){return t==="indeterminate"}function X(t){return b(t)?"indeterminate":t?"checked":"unchecked"}var G=W,be=K;const J=c.forwardRef(({className:t,...r},s)=>e.jsx(G,{ref:s,className:N("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-white data-[state=checked]:text-primary-foreground",t),...r,children:e.jsx(be,{className:N("flex items-center justify-center text-current"),children:e.jsx(R,{className:"h-4 w-4 text-primary",strokeWidth:4})})}));J.displayName=G.displayName;const E=({id:t,label:r,onChange:s,defaultChecked:o})=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{id:t,className:"h-5 w-5 bg-background border-border",onCheckedChange:n=>{if(n==="indeterminate"){s(!0);return}s(n)},defaultChecked:o}),e.jsx("label",{htmlFor:t,className:"leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:r})]}),k=({title:t,onChange:r,id:s,children:o})=>{const n=(a,u)=>{console.log("Alert type changed: ",a,u),r(a)};return e.jsxs(re,{title:t,titleBackground:!0,border:!0,children:[o,e.jsxs("div",{className:"p-4 grid gap-4 grid-cols-2",children:[e.jsx(E,{id:s+"-notification",label:"Notificação",onChange:a=>{n("notification",a)},defaultChecked:!0}),e.jsx(E,{id:s+"-whatsapp",label:"WhatsApp",onChange:a=>{n("whatsapp",a)}}),e.jsx(E,{id:s+"-sms",label:"SMS",onChange:a=>{n("sms",a)}}),e.jsx(E,{id:s+"-email",label:"Email",onChange:a=>{n("email",a)}})]})]})},je=()=>{const t=s=>`${s}%`,r=s=>{console.log("Refresh rate changed: ",s)};return e.jsx(le,{marks:[{percentage:5,label:"5%"},{percentage:15,label:"15%"},{percentage:25,label:"25%"},{percentage:35,label:"35%"}],tipParser:t,min:5,max:35,step:1,onChangeComplete:r,showTrack:!0})},ye=({value:t,onConfirm:r,onCancel:s,onChange:o})=>{const{isEditing:n,setIsEditing:a}=c.useContext(V),[u,d]=c.useState(t??""),[m,f]=c.useState(!1),p=()=>{a(!0),d(t??"")},x=()=>{r?(f(!0),r(u).finally(()=>{a(!1),f(!1)})):a(!1)},i=()=>{a(!1),d(t??""),s&&s()},l=h=>{d(h??""),o&&o(h??"")};return e.jsxs(e.Fragment,{children:[n&&e.jsx(H,{onClose:i,open:n,confirm:t!==u}),e.jsxs("form",{className:N("text-lg flex items-center",n?"rounded-md gap-2 z-[20] w-full sm:max-w-xs":"gap-4"),onSubmit:h=>{h.preventDefault(),x()},children:[n?e.jsx(ue,{placeholder:"(99) 99999-9999",value:t,onChange:l,defaultCountry:"BR",labels:L,inputComponent:I,className:"w-full text-black",autoComplete:"tel",disabled:m}):e.jsx(e.Fragment,{children:me(t)}),n?e.jsx(v,{onClick:x,className:"[&_svg]:size-5 aspect-square",size:"icon",variant:"secondary",disabled:m,type:"submit",children:m?e.jsx(z,{strokeColor:"white"}):e.jsx(R,{})},"accept-button"):e.jsx(v,{onClick:p,className:"[&_svg]:size-5",size:"icon",variant:"secondary",type:"button",children:e.jsx(O,{})},"edit-button")]})]})},T=({value:t,onConfirm:r,onCancel:s,onChange:o})=>{const{isEditing:n,setIsEditing:a}=c.useContext(V),[u,d]=c.useState(t??""),[m,f]=c.useState(!1),p=()=>{a(!0),d(t??"")},x=()=>{r?(f(!0),r(u).finally(()=>{a(!1),f(!1)})):a(!1)},i=()=>{a(!1),d(t??""),s&&s()},l=h=>{d(h.target.value),o&&o(h.target.value)};return e.jsxs(e.Fragment,{children:[n&&e.jsx(H,{onClose:i,open:n,confirm:t!==u}),e.jsxs("form",{className:N("text-lg flex items-center",n?"rounded-md gap-2 z-[20] w-full sm:max-w-xs":"gap-4"),onSubmit:h=>{h.preventDefault(),x()},children:[n?e.jsx(I,{value:u,onChange:l,autoFocus:!0,className:"w-full"}):e.jsx(e.Fragment,{children:t}),n?e.jsx(v,{onClick:x,className:"[&_svg]:size-5 aspect-square",size:"icon",variant:"secondary",disabled:m,type:"submit",children:m?e.jsx(z,{strokeColor:"white"}):e.jsx(R,{})},"accept-button"):e.jsx(v,{onClick:p,className:"[&_svg]:size-5",size:"icon",variant:"secondary",type:"button",children:e.jsx(O,{})},"edit-button")]})]})},ke=()=>{const{session:t,user:r,setUser:s,loading:o}=ae(),[n,a]=c.useState(!1),u=c.useMemo(()=>o?"Carregando...":r?r.name:"",[r]),d=c.useMemo(()=>o?"Carregando...":t?t.user.email:"",[r]),m=c.useMemo(()=>o?"Carregando...":r?r.phone??"Não informado":"",[r]),f=async i=>{if(!r){C.error("Usuário não encontrado.");return}try{const l=await F(r.id,{name:i});if(l.error)throw l.error;if(l.data.length===0)throw new Error("User not found");s({...r,name:l.data[0].name}),C.success("Nome atualizado com sucesso.")}catch(l){console.error("Error updating user name: ",l),C.error("Erro ao atualizar nome. Tente novamente.")}},p=async i=>{if(!r){C.error("Usuário não encontrado.");return}try{const l=await F(r.id,{phone:i});if(l.error)throw l.error;if(l.data.length===0)throw new Error("User not found");s({...r,phone:l.data[0].phone}),C.success("Telefone atualizado com sucesso.")}catch(l){console.error("Error updating user phone: ",l),C.error("Erro ao atualizar telefone. Tente novamente.")}},x=async()=>{if(!d){C.error("Email não encontrado.");return}a(!0);try{const{error:i}=await ne(d);if(i)throw i;C.success("Email de troca de senha enviado com sucesso.")}catch(i){console.error("Error sending password reset email: ",i),C.error("Erro ao enviar email de recuperação de senha.")}a(!1)};return e.jsxs("div",{className:"space-y-2 md:mx-0",children:[e.jsx(w,{title:"Nome",children:e.jsx(T,{value:u,onConfirm:f})}),e.jsx(w,{title:"Email",children:e.jsx(T,{value:d,onConfirm:async i=>{alert("Salvando email"+i)}})}),e.jsx(w,{title:"Telefone",children:e.jsx(ye,{value:m,onConfirm:p})}),e.jsx(w,{title:"Senha",children:e.jsx(v,{variant:"secondary",size:"sm",onClick:x,disabled:n,children:n?e.jsxs(e.Fragment,{children:["Enviando ",e.jsx(z,{strokeColor:"white"})]}):e.jsxs(e.Fragment,{children:["Alterar senha",e.jsx(pe,{})]})})})]})},ve=oe.lazy(()=>ie(()=>import("./index-CYD-WjRl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),Ve=()=>{const[t,r]=c.useState(),[s]=c.useState(!1),o=n=>{console.log("Alert type changed: ",n)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-white space-y-4 px-0 sm:px-2 mb-16 md:mb-0",children:[e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("h1",{className:"text-4xl font-semibold w-fit mx-auto",children:"Meu Perfil"}),e.jsx(he,{className:"h-40 w-40 mx-auto",strokeWidth:.7})]}),e.jsx(ke,{}),e.jsx(D,{className:"sm:-mx-2 mt-8"}),e.jsx(M,{title:"Configuração de alertas",description:"Defina o tipo de alerta que será enviado quando um evento for detectado pela pulseira."}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx(k,{title:"Taxa de atualização",id:"fall-detection",onChange:o,children:e.jsx("div",{className:"py-4 px-6",children:e.jsx(de,{})})}),e.jsx(k,{id:"battery-50",title:"50% de bateria",onChange:o}),e.jsx(k,{title:"Bateria baixa",id:"low-battery",onChange:o,children:e.jsx("div",{className:"py-4 px-6",children:e.jsx(je,{})})}),e.jsx(k,{title:"Detecção de quedas",id:"fall-detection",onChange:o}),e.jsx(k,{id:"out-of-area",title:"Saiu da área de segurança",onChange:o})]}),e.jsx(D,{className:"sm:-mx-2 mt-8"}),e.jsx(M,{title:"Contato de Emergência",description:"Adicione um número de telefone para realizar uma discagem rápida."}),e.jsx("div",{children:e.jsx(c.Suspense,{fallback:e.jsx("div",{children:"Carregando..."}),children:e.jsx(ve,{placeholder:"(99) 99999-9999",value:t,onChange:n=>r(n),defaultCountry:"BR",labels:L,inputComponent:I,className:"col-span-3 placeholder-red-200 text-black",autoComplete:"tel",disabled:s})})})]})})};export{Ve as default};
